(self.modernJsonp=self.modernJsonp||[]).push([["94057"],{731462:function(e,t,i){i.d(t,{Z:()=>a});var s=i(281098),n=i(667294),r=i(20256),o=i(947050),l=i(785893);let a=({animationData:e})=>{(0,n.useEffect)(()=>{(0,s.Z)("HeaderIconLottie","/app/common/react/components/growth/news/NewsHub/HeaderIcon/HeaderIconLottie.tsx")},[]);let{animationContainerRef:t}=(0,o.Z)({animationData:e,loop:!0,autoplay:!0});return(0,n.useMemo)(()=>(0,l.jsx)(r.xu,{ref:t,"data-testid":"lottie-header-icon",height:"100%",left:!0,position:"absolute",top:!0,width:"100%"}),[t])||null}},777939:function(e,t,i){i.d(t,{Q2:()=>l,Wy:()=>h,Y0:()=>o,_Z:()=>a,fK:()=>d});var s=i(410156),n=i(686319),r=i(670622);let o=(e,t)=>t.some(t=>e&1<<t),l=({lastUpdatedAt:e})=>{let t=(0,r.Z)(),i=new Date(e);return new Date().getTime()-i.getTime()>s.F4&&i.setHours(0,0,0,0),` ${t(i,!0)}`};function a(e,t){return(0,n.Z)({url:`/v3/news_hub/${e}/fatigue/${t}/`,method:"POST"})}function d(e,t){return(0,n.Z)({url:`/v3/news_hub/${e}/fatigue/${t}/`,method:"DELETE"})}function h(e,t){return(0,n.Z)({url:"/v3/news_hub/hide/batch/",method:"PUT",data:{news_ids:[e],should_hide:t}})}},61063:function(e,t,i){i.d(t,{Z:()=>s});function s(e,t){let i=new Date,s=new Date(e);return i.getTime()-s.getTime()>864e5&&s.setHours(0,0,0,0),t(s.toString(),!0)}},628708:function(e,t,i){i.d(t,{Z:()=>u});var s=i(667294),n=i(980787),r=i(821342),o=i(510928),l=i(776777),a=i(785893);function d(e,t,i){var s;return(t="symbol"==typeof(s=function(e,t){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var s=i.call(e,t||"default");if("object"!=typeof s)return s;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?s:s+"")in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}let h=(0,o.Z)()&&(0,o.Z)().debug_impression_log,c={Article:{impressionType:"articleImpressions",idType:"articleIdStr",eventType:3829},Pin:{impressionType:"pinImpressions",idType:"pinIdStr",eventType:18},Board:{impressionType:"boardImpressions",idType:"boardIdStr",eventType:3700},Interest:{impressionType:"topicImpressions",idType:"topicIdStr",eventType:3703},Search:{impressionType:"searchImpressions",idType:"term",eventType:3803},User:{impressionType:"userImpressions",idType:"userIdStr",eventType:3704},News:{impressionType:"newsHubData",idType:"newsIdStr",eventType:4110},Story:{impressionType:"storyImpression",idType:"idStr",eventType:170},Guide:{impressionType:"guideImpressions",idType:"term",eventType:7573},ActivationCard:{impressionType:"activationCardImpressions",idType:"experienceIdStr",eventType:8547},Banner:{impressionType:"bannerImpressions",idType:"userIdStr",eventType:9061}};function u(e){class t extends s.Component{constructor(...e){super(...e),d(this,"currentNs",()=>1e6*Date.now()),d(this,"startTime",0),d(this,"debugPinImpressions",h&&"Pin"===this.props.impressionType&&this.props.viewer.isAuth&&this.props.viewer.isEmployee),d(this,"handleVisibilityChanged",e=>{let{componentType:t,contextLogData:i,impressionAuxFields:s,impressionType:n,loggingId:r,slotIndex:o,viewParameter:l,viewType:a,viewData:d,logContextEvent:h}=this.props;if(e)this.startTime=this.currentNs(),this.debugPinImpressions&&console.log(o+" started timer");else{let e=c[n],u=e.idType,p=this.currentNs(),g={endTime:p,[u]:r,slotIndex:o,time:this.startTime,renderDuration:p-this.startTime,...s};h({event_type:e.eventType,component:t,event_data:{[e.impressionType]:[g]},view_type:a,view_parameter:l,view_data:d,aux_data:{...i}}),this.debugPinImpressions&&console.log(o+" logged for "+(p-this.startTime)/1e9+"s")}})}render(){return(0,a.jsx)(l.Z,{onVisibilityChanged:this.handleVisibilityChanged,...this.props,children:(0,a.jsx)(e,{...this.props})})}}return function(e){let{logContextEvent:i}=(0,n.u)(),s=(0,r.Z)();return(0,a.jsx)(t,{...e,logContextEvent:i,viewer:s})}}},2929:function(e,t,i){function s(e){return e===window?window.innerHeight:e.clientHeight}function n(){return void 0!==window.scrollY?window.scrollY:document.documentElement&&void 0!==document.documentElement.scrollTop?document.documentElement.scrollTop:0}function r(e){return e===window&&document.documentElement?document.documentElement.scrollHeight:e.scrollHeight}function o(e){return e===window?n():e.scrollTop}function l(){window&&window.scroll(0,0)}i.d(t,{MX:()=>o,S$:()=>n,Uy:()=>s,aZ:()=>r,vM:()=>l})},776777:function(e,t,i){i.d(t,{Z:()=>a});var s=i(281098),n=i(667294),r=i(20256),o=i(331854),l=i(785893);function a({onVisibilityChanged:e,children:t,...i}){(0,n.useEffect)(()=>{(0,s.Z)("VisibilityChangedWrapper","/app/packages/useVisibilityChanged/VisibilityChangedWrapper.tsx")},[]);let a=(0,o.Z)({onVisibilityChanged:e,...i});return(0,l.jsx)(r.xu,{ref:a,children:t})}},331854:function(e,t,i){i.d(t,{Z:()=>l});var s=i(667294);let n=new Map,r=null,o=e=>{e.forEach(e=>{let t=n.get(e.target);t&&t(e)})};function l({onVisibilityChanged:e,trackFullVisible:t,rootMargin:i}){let l=(0,s.useRef)(null),a=!1,d=()=>{let t;l.current instanceof HTMLElement&&(t=l.current,n.has(t))&&a&&(e(!1),a=!1)},h=(0,s.useCallback)(i=>{l.current instanceof HTMLElement&&((e,t="-64px 0px 0px 0px",i)=>{let s={root:"undefined"==typeof document?null:document.querySelector("#mainContainer"),rootMargin:t,threshold:[0,.5,1]};r=r||new window.IntersectionObserver(o,s),n.set(e,i),r.observe(e)})(l.current,i,i=>{if(!n.has(l.current))return;let s=t?i.intersectionRatio>=1:i.intersectionRatio>=.5,r=t?0===i.intersectionRatio:!s;!a&&s?(a=i.intersectionRatio>0||i.isIntersecting)&&e(!0):a&&r&&d()})},[l.current]);return(0,s.useEffect)(()=>(h(i),()=>{if(l.current instanceof HTMLElement){var e;d(),e=l.current,r.unobserve(e),n.delete(e)}}),[h]),l}},806413:function(e,t,i){i.r(t),i.d(t,{default:()=>ev});var s=i(281098),n=i(667294),r=i(20256),o=i(980787),l=i(19585),a=i(765533),d=i(15667),h=i(536488);function c(e){let t={padding:"23px 0"};return e?{...t,borderTopLeftRadius:16,borderTopRightRadius:16,boxShadow:"0 6px 8px -4px rgba(0, 0, 0, 0.1)",transition:"box-shadow 300ms ease-in-out"}:t}var u=i(825332),p=i(78730),g=i(10594),_=i(346955),m=i(910818),w=i(886981),f=i(968842),x=i(694955),b=i(123998),v=i(866370),y=i(628708),j=i(731462),I=i(667835),S=i(744862),P=i(509120),E=i(785893);function T({i18n:e,headerIconImageUrl:t,headerIconObjects:i=[],headerSmallOverlayIconUrl:o,headerSmallOverlayIconUrlDark:l}){(0,n.useEffect)(()=>{(0,s.Z)("HeaderIcon","/app/common/react/components/growth/news/NewsHub/HeaderIcon/HeaderIcon.tsx")},[]);let a=h.Vp,d=h.uy,[c,u]=(0,n.useState)(null),p=t&&".json"===t.slice(-5).toLowerCase(),g=async e=>{try{let t=await fetch(e);return await t.json()}catch(e){return null}};(0,n.useEffect)(()=>{(async()=>{p&&!c&&u(await g(t))})()},[p,c,t]);let _=(0,n.useMemo)(()=>c?(0,E.jsx)(j.Z,{animationData:c}):(0,E.jsx)(r.xH,{accessibilityLabel:"Loading",show:!0,size:"sm"}),[c]);if(t){let i=p?h.mD:d,s=p?h.vG:d;return(0,E.jsx)(r.xu,{height:i,width:s,children:(0,E.jsx)(r.zd,{height:i,rounding:p?2:"circle",width:s,children:p?(0,E.jsx)(r.xu,{"data-test-id":"lottie-icon",children:_}):(0,E.jsx)(r.xu,{"data-test-id":"header-icon-image",height:i,width:s,children:(0,E.jsx)(r.Ee,{alt:e.bt("Recommandation Pinterest", "Pinterest recommendation", "label for notification with recommended content", undefined, true),color:"#fff",fit:"cover",naturalHeight:d,naturalWidth:d,src:t})})})})}if(0===i.length||void 0===i[0])return null;let m=(0,I.Yc)()?l:o,w=m?(0,E.jsx)(r.xu,{bottom:!0,"data-test-id":"notification-item-icon-overlay",marginBottom:-1,marginEnd:-1,position:"absolute",right:!0,children:(0,E.jsx)(r.zd,{height:h.wl,rounding:h.I2,wash:!0,width:h.wl,children:(0,E.jsx)(r.Ee,{alt:"",fit:"cover",naturalHeight:h.wl,naturalWidth:h.wl,src:m})})}):null,f=i[0].type;if(f===h.Ng.PIN){let e=i[0],t=e.images[h.di],s=h.mD,n=h.vG;return t&&t.url&&(0,E.jsxs)(r.xu,{height:s,position:"relative",width:n,children:[(0,E.jsx)(r.zd,{height:s,rounding:h.I2,wash:!0,children:(0,E.jsx)(r.kC,{alignItems:"stretch",justifyContent:"between",width:n,children:(0,E.jsx)(r.GH,{contentAspectRatio:t.width/t.height,height:s,width:n,children:(0,E.jsx)(r.Ee,{alt:e.description,naturalHeight:s,naturalWidth:n,src:t.url})})})}),w]})}if(f===h.Ng.BOARD){let e=i[0].image_cover_url;return(0,E.jsx)(r.xu,{height:d,width:d,children:(0,E.jsx)(r.zd,{height:d,rounding:h.I2,wash:!0,children:(0,E.jsx)(r.kC,{alignItems:"stretch",justifyContent:"between",width:d,children:(0,E.jsx)(r.GH,{contentAspectRatio:1,height:d,width:d,children:(0,E.jsx)(P.Z,{height:d,imgPos:{width:0,height:0,x:0,y:0},imgUrl:e,width:d})})})})})}if(f===h.Ng.SEARCH){let e=i[0],t=Array.isArray(e.images)&&e.images[0]?e.images[0]:"";return(0,E.jsx)(r.xu,{height:d,width:d,children:(0,E.jsx)(r.zd,{height:d,rounding:h.I2,wash:!0,children:(0,E.jsx)(r.kC,{alignItems:"stretch",justifyContent:"between",width:d,children:(0,E.jsx)(r.GH,{contentAspectRatio:1,height:d,width:d,children:(0,E.jsx)(P.Z,{height:d,imgPos:{width:0,height:0,x:0,y:0},imgUrl:t,width:d})})})})})}if(f===h.Ng.USER)if(i.length>1&&void 0!==i[1]){let e=i[0],t=i[1];return(0,E.jsx)(r.xu,{height:d,width:d,children:(0,E.jsxs)(r.xu,{height:d,position:"relative",width:d,children:[(0,E.jsx)(r.xu,{display:"flex",height:a,left:!0,position:"absolute",top:!0,width:a,children:(0,E.jsx)(S.qE,{name:e.full_name,outline:!0,src:e.image_large_url})}),(0,E.jsx)(r.xu,{bottom:!0,display:"flex",height:a,position:"absolute",right:!0,width:a,children:(0,E.jsx)(S.qE,{name:t.full_name,outline:!0,src:t.image_large_url})})]})})}else{let e=i[0];return(0,E.jsx)(r.xu,{height:d,position:"relative",width:d,children:(0,E.jsxs)(r.kC,{alignItems:"stretch",justifyContent:"between",width:d,children:[(0,E.jsx)(S.qE,{name:e.full_name,src:e.image_large_url}),w]})})}return null}function C(e){(0,n.useEffect)(()=>{(0,s.Z)("HeaderIcon","/app/common/react/components/growth/news/NewsHub/HeaderIcon/HeaderIcon.tsx")},[]);let t=(0,l.ZP)();return(0,E.jsx)(T,{...e,i18n:t})}var A=i(61063),N=i(686319),H=i(821342),L=i(670622),Z=i(777939),z=i(669442),R=i(483180),M=i(554158),O=i(163404),U=i(378888),k=i(475498),D=i(473728),B=i(87853),F=i(966279);let G={UNFOLLOWED_USER:"unfollowedUser",UNFOLLOWED_PIN:"unfollowedPin",FOLLOWED_USER:"followedUser",FOLLOWED_PIN:"followedPin",ACTION_FAILED:"actionFailed"};function W({handleClick:e,handleEnterEllipsis:t,handleExitEllipsis:i,handleObjectSubscriptionById:a,isMouseOverEllipsis:d,newsId:c,newsType:u,subscribableObjects:p,subscribedToObjectIdMap:g}){(0,n.useEffect)(()=>{(0,s.Z)("MenuEllipsis","/app/www/growth/news/NewsHub/MenuEllipsis/MenuEllipsis.tsx")},[]);let{logContextEvent:_}=(0,o.u)(),{updateNewsIdToHiddenNews:m}=(0,F.nJ)(),w=(0,l.ZP)(),f=(0,n.useRef)(null),x=p?p[0]:null,b=x?.id??0,v=x?.type??"",y=x?.full_name??"",{showToast:j,showOneToast:I}=(0,B.dI)(),[S,P]=(0,n.useState)(!1),[T,C]=(0,n.useState)(!1),[A,H]=(0,n.useState)(g[b]),L=!!x,z=`${h.C}_${c}`,R={unfollowedUser:(0,D.Z)(w.bt("Vous ne recevrez plus de notifications concernant {{user_name}}.", "You will no longer receive notifications about {{user_name}}.", "unfollwedUser.toast", undefined, true),{user_name:y}),unfollowedPin:w.bt("Vous ne recevrez plus de notifications concernant cette Épingle.", "You will no longer receive notifications about this Pin.", "unfollwedPin.toast", undefined, true),followedUser:(0,D.Z)(w.bt("Vous recevrez désormais des notifications concernant {{user_name}}.", "You will now receive notifications about {{user_name}}.", "followedUser.toast", undefined, true),{user_name:y}),followedPin:w.bt("Vous recevrez désormais des notifications concernant cette Épingle.", "You will now receive notifications about this Pin.", "follwedPin.toast", undefined, true),actionFailed:w.bt("L’action n’a pas pu être effectuée", "Action could not be performed", "notPerformed.toast", undefined, true)},M={unfollowedUser:(0,D.Z)(w.bt("Désactiver les mises à jour pour {{ user_name }}", "Turn off updates from {{ user_name }}", "NewsListItem.UnfollowUser.Flyout", undefined, true),{user_name:y}),unfollowedPin:w.bt("Désactiver les mises à jour de cette Épingle", "Turn off updates from this Pin", "NewsListItem.UnfollowPin.Flyout", undefined, true),followedUser:(0,D.Z)(w.bt("Activer les mises à jour pour {{ user_name }}", "Turn on updates from {{ user_name }}", "NewsListItem.UnfollowUser.Flyout", undefined, true),{user_name:y}),followedPin:w.bt("Activer les mises à jour de cette Épingle", "Turn on updates from this Pin", "NewsListItem.FollowPin.Flyout", undefined, true),actionFailed:""};(0,n.useEffect)(()=>{T&&e()},[T]),(0,n.useEffect)(()=>{b&&H(g[b])},[g[b]]);let O=e=>{let t=w.bt("L’action n’a pas pu être effectuée", "Action could not be performed", "notPerformed.toast", undefined, true);Object.values(G).includes(e)&&(t=R[e]),j(({hideToast:e})=>(0,E.jsx)(k.Z,{duration:h.QE,onHide:e,text:t}))},U=(e,t)=>{let{UNFOLLOWED_USER:i,UNFOLLOWED_PIN:s,FOLLOWED_USER:n,FOLLOWED_PIN:r,ACTION_FAILED:o}=G,{USER:l,PIN:a}=h.Ng;return e&&t===l?i:e||t!==l?e&&t===a?s:e||t!==a?o:r:n},W=async()=>{try{let{error:e,data:t}=(await (0,N.Z)({url:"/v3/settings/notifications/objects/",method:"POST",data:{object_ids_to_unsubscribe:A?b:null,object_ids_to_resubscribe:A?null:b}})).resource_response;e||a(b,t[b]);let i=U(!!A,v);O(i)}catch(e){O(e)}},Y=async e=>{try{let{error:t}=(await (0,Z._Z)(c,e)).resource_response;t||Q(e)}catch(e){O(e)}},$=async e=>{try{await (0,Z.fK)(c,e)}catch(e){O(e)}},V=async e=>{try{let{error:t}=(await (0,N.Z)({url:"/v3/news_hub/hide/batch/",method:"PUT",data:{news_ids:[c],should_hide:e}})).resource_response;!t&&(m(c,e),e&&X())}catch(e){O(e)}},X=()=>{let e=w.bt("Mise à jour supprimée !", "Update removed!", "NewsListItem.UndoRemove.Toast.Text", undefined, true);I(({hideToast:t})=>(0,E.jsx)(k.Z,{duration:h.QE,onHide:t,primaryAction:{accessibilityLabel:w.bt("Annuler la suppression", "Undo removal", "NewsListItem.UndoRemove.Toast.a11yButton", undefined, true),label:w.bt("Annuler", "Undo", "NewsListItem.UndoRemove.Toast.Button", undefined, true),onClick:()=>{V(!1),t()}},text:e}))},q=()=>{_({event_type:101,element:12209,component:3,view_type:107,view_parameter:3081,object_id_str:JSON.stringify(b),aux_data:{news_type:u,is_unsub_action:A}}),W(),i(),P(!1)},J=e=>{_({event_type:101,element:14308,component:3,view_type:107,view_parameter:3081}),Y(e),i(),P(!1)},Q=e=>{let t=w.bt("Compris ! Nous vous montrerons moins de contenu sur ce centre d’intérêt", "Got it! We'll show you less about this interest", "NewsListItem.UndoSeeLess.Toast.Text", undefined, true);I(({hideToast:i})=>(0,E.jsx)(k.Z,{duration:h.QE,onHide:i,primaryAction:{accessibilityLabel:w.bt("Annuler « Voir moins »", "Undo see less", "NewsListItem.UndoSeeLess.Toast.a11yButton", undefined, true),label:w.bt("Annuler", "Undo", "NewsListItem.UndoSeeLess.Toast.Button", undefined, true),onClick:()=>{_({event_type:101,element:14309,component:3,view_type:107,view_parameter:3081}),$(e),i()}},text:t}))},K=()=>{_({event_type:101,element:13135,component:3,view_type:107,view_parameter:3081}),V(!0),i(),P(!1)},ee=()=>{_({event_type:101,element:12210,component:3,view_type:107,view_parameter:3081,aux_data:{news_type:u}}),C(!0)};return(0,E.jsxs)(r.xu,{ref:f,onMouseEnter:t,onMouseLeave:i,children:[(0,E.jsx)(r.hU,{accessibilityControls:z,accessibilityExpanded:S,accessibilityLabel:w.bt("Options pour la mise à jour des paramètres d’abonnement", "Options to update subscription settings", "Options to update subscription settings", undefined, true),bgColor:"white",dataTestId:"ellipsis-icon",icon:"ellipsis",iconColor:"darkGray",onClick:()=>{_({event_type:101,element:12208,component:3,view_type:107,view_parameter:3081,aux_data:{was_flyout_open:S,news_type:u}}),P(!S)},selected:d,size:"xs"}),S&&(()=>{let e=w.bt("Afficher les paramètres de notifications", "View notification settings", "NewsListItem.ViewNotificationSettings.Flyout", undefined, true),t=w.bt("Supprimer la mise à jour", "Delete update", "NewsListItem.RemoveNews.Item", undefined, true),i=v===h.Ng.INTEREST;return(0,E.jsxs)(r.Lt,{anchor:f.current,disableMobileUI:!0,id:z,idealDirection:"down",maxHeight:"30vh",onDismiss:()=>P(!1),zIndex:new r.Ry(1e3),children:[i?(()=>{let e=w.bt("Voir moins de contenu sur", "See less about", "NewsListItem.SeeLess.Item", undefined, true),t=p?p[0]:null,i=p?p[1]:null,s=t?.id??"",o=e+" "+(t?.name??"");if(!i)return(0,E.jsx)(r.Lt.Item,{onSelect:()=>J(s.toString()),option:{label:o,value:o}});{let t=i.id??"",l=e+" "+(i.name??"");return(0,E.jsxs)(n.Fragment,{children:[(0,E.jsx)(r.Lt.Item,{onSelect:()=>J(s.toString()),option:{label:o,value:o}}),(0,E.jsx)(r.Lt.Item,{onSelect:()=>J(t.toString()),option:{label:l,value:l}})]})}})():L&&(()=>{let e=U(!!A,v),t="";return Object.values(G).includes(e)&&(t=M[e]),(0,E.jsx)(r.Lt.Item,{onSelect:q,option:{label:t,value:t}})})(),(0,E.jsx)(r.Lt.Item,{onSelect:K,option:{label:t,value:t}}),(0,E.jsx)(r.Lt.Link,{href:"/settings/notifications",onClick:ee,option:{label:e,value:e}})]})})()]})}function Y({board:{name:e,image_cover_url:t,images:i}}){(0,n.useEffect)(()=>{(0,s.Z)("MiniBoardGrid","/app/www/growth/news/NewsHub/MiniBoardGrid/MiniBoardGrid.tsx")},[]);let o=t?{url:t}:void 0,l=function(e,t){let i=e?new Set([e.substring(e.lastIndexOf("/")+1)]):new Set;return(t?t[h.ZH]:[]).filter(e=>{let t=(e.url??"").substring((e.url??"").lastIndexOf("/")+1);return!i.has(t)&&(i.add(t),!0)})}(t,i);if(void 0===o||l.length<h.kc)return null;let a=[l.slice(0,2),l.slice(2,4)];return(0,E.jsx)(r.xu,{height:h.wA,width:h.aE,children:(0,E.jsx)(r.zd,{height:h.wA,rounding:h.gs,wash:!0,children:(0,E.jsxs)(r.kC,{alignItems:"stretch",justifyContent:"between",width:h.aE,children:[(0,E.jsx)(r.xu,{dangerouslySetInlineStyle:{__style:{marginRight:h.GO}},height:h.AM,position:"relative",width:h.qZ,children:(0,E.jsx)(P.Z,{height:h.AM,imgPos:{width:0,height:0,x:0,y:0},imgUrl:o.url,width:h.qZ})}),a.map((t,i)=>(0,E.jsx)(r.xu,{children:t.map((s,n)=>(0,E.jsx)(r.xu,{dangerouslySetInlineStyle:{__style:{marginRight:i<a.length-1?h.GO:"",marginBottom:n<t.length-1?h.GO:""}},height:h.So,position:"relative",width:h.qb,children:(0,E.jsx)(r.GH,{contentAspectRatio:(s.width??1)/(s.height??1),height:h.So,width:h.qb,children:s.url&&(0,E.jsx)(r.Ee,{alt:e??"",naturalHeight:s.height??1,naturalWidth:s.width??1,src:s.url})})},"col"+i+"row"+n))},"col"+i))]})})})}function $(e){(0,n.useEffect)(()=>{(0,s.Z)("MiniInterestGrid","/app/www/growth/news/NewsHub/MiniInterestGrid/MiniInterestGrid.tsx")},[]);let{interests:t}=e;if(!t||!t.length)return null;let i=t.slice(0,h.c4),o=i.length/h.c4*h.aE;return(0,E.jsx)(r.xu,{height:h.wA,width:o,children:(0,E.jsx)(r.zd,{height:h.wA,rounding:h.gs,wash:!0,children:(0,E.jsx)(r.kC,{alignItems:"stretch",justifyContent:"between",width:o,children:i.map((e,t)=>{let{background_color:s,images:{"236x":n},name:o}=e;return n?(0,E.jsxs)(r.xu,{dangerouslySetInlineStyle:{__style:{marginRight:t<i.length-1?h.GO:""}},height:h.Rd,position:"relative",width:h.P,children:[(0,E.jsx)(r.GH,{contentAspectRatio:n.width&&n.height?n.width/n.height:1,height:h.Rd,width:h.P,children:n.url&&(0,E.jsx)(r.Ee,{alt:o,color:s,naturalHeight:1,naturalWidth:1,src:n.url})}),(0,E.jsx)(r.xu,{dangerouslySetInlineStyle:{__style:h.uW},height:h.Rd,left:!0,position:"absolute",top:!0,width:h.P}),(0,E.jsx)(r.xu,{alignItems:"center",display:"flex",height:h.Rd,justifyContent:"center",padding:3,position:"absolute",top:!0,width:h.P,children:(0,E.jsx)(r.xv,{align:"center",color:"inverse",weight:"bold",children:o})})]},t):null})})})})}let V=function(e){let{pins:t}=e;if(0===t.length)return null;let i=t.slice(0,h.ie),s=i.length/h.ie*h.aE;return(0,E.jsx)(r.xu,{height:h.wA,width:s,children:(0,E.jsx)(r.zd,{height:h.wA,rounding:h.gs,wash:!0,children:(0,E.jsx)(r.kC,{alignItems:"stretch",justifyContent:"between",width:s,children:i.map((e,t)=>(0,E.jsx)(r.xu,{dangerouslySetInlineStyle:{__style:{marginRight:t<i.length-1?h.GO:""}},height:h.P3,overflow:"hidden",position:"relative",width:h.J0,children:(0,E.jsx)(r.GH,{contentAspectRatio:e.width&&e.height?e.width/e.height:1,height:h.P3,width:h.J0,children:e.url&&(0,E.jsx)(r.Ee,{alt:"MiniPinGridLego",naturalHeight:1,naturalWidth:1,src:e.url})})},t))})})})};function X(e){(0,n.useEffect)(()=>{(0,s.Z)("MiniSearchGrid","/app/www/growth/news/NewsHub/MiniSearchGrid/MiniSearchGrid.tsx")},[]);let{searches:t}=e;if(!t||!t.length)return null;let i=t.filter(e=>void 0!==e).slice(0,h.DX),o=[[],[]];i.map((e,t)=>(o[t%h.mM].push(e),e));let l=o[0].length/h.ci*h.wA,a=Math.min(t.length,h.mM)/h.mM*h.aE;return(0,E.jsx)(r.xu,{height:l,width:a,children:(0,E.jsx)(r.zd,{height:l,rounding:h.gs,children:(0,E.jsx)(r.kC,{alignItems:"stretch",justifyContent:"between",width:a,children:o.map((e,t)=>(0,E.jsx)(r.xu,{children:e.map((i,s)=>{let{images:n=[],term:l}=i;return(0,E.jsxs)(r.xu,{dangerouslySetInlineStyle:{__style:{marginRight:t<o.length-1?h.GO:"",marginBottom:s<e.length-1?h.GO:""}},height:h.cU,position:"relative",width:h.WC,children:[(0,E.jsx)(r.GH,{contentAspectRatio:2,height:h.cU,width:h.WC,children:(0,E.jsx)(r.Ee,{alt:l,naturalHeight:1,naturalWidth:1,src:n[0]})}),(0,E.jsx)(r.xu,{dangerouslySetInlineStyle:{__style:h.uW},height:h.cU,left:!0,position:"absolute",top:!0,width:h.WC}),(0,E.jsx)(r.xu,{alignItems:"center","data-test-id":"term-text",display:"flex",height:h.cU,justifyContent:"center",padding:3,position:"absolute",top:!0,width:h.WC,children:(0,E.jsx)(r.xv,{align:"center",color:"inverse",weight:"bold",children:l})})]},"col"+t+"row"+s)})},"col"+t))})})})}var q=i(64932),J=i(30536),Q=i(197891),K=i(771347),ee=i(694103);function et(e,t,i){var s;return(t="symbol"==typeof(s=function(e,t){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var s=i.call(e,t||"default");if("object"!=typeof s)return s;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?s:s+"")in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class ei extends n.Component{constructor(e){super(e),et(this,"getHandleClickFun",e=>()=>{let{handleClick:t,id:i,type:s,logContextEvent:n}=this.props;n({event_type:101,object_id_str:i,view_type:107,view_parameter:3081,aux_data:{news_type:s}}),this.handleNewsHubClickTrackLogging(i,e),t()}),et(this,"handleNewsHubClickTrackLogging",(e,t)=>{(0,N.Z)({url:"/v3/news_hub/click/",method:"POST",data:{news_id_str:e,link:t}})}),this.state={isMouseOverComponent:!1,isMouseOverEllipsis:!1}}get displayComponent(){let{contentItems:e,contentText:t,displayMode:i}=this.props,s=e.filter(({content_object:e})=>e).map(({content_object:e})=>e);if((0,Z.Y0)(i,[h.gb.MINI_PIN_GRID_2])){let e=s.map(e=>e.images[h.yc]);return(0,E.jsx)(V,{pins:e})}if((0,Z.Y0)(i,[h.gb.MINI_BOARD_GRID,h.gb.MINI_BOARD_GRID_WITH_ICON]))return(0,E.jsx)(Y,{board:s[0]});if((0,Z.Y0)(i,[h.gb.MINI_USER_GRID])){let e=s[0].recent_pin_images["200x"]||[];return(0,E.jsx)(V,{pins:e})}if((0,Z.Y0)(i,[h.gb.ROW_WITH_COUNT_2])){let e=new Set,t=s.filter(t=>{let{image_signature:i}=t;return!(i&&e.has(i))&&(e.add(i),!0)}).map(e=>e.images[h.yc]);return(0,E.jsx)(V,{pins:t})}if((0,Z.Y0)(i,[h.gb.MINI_INTEREST_GRID]))return(0,E.jsx)($,{interests:s});if((0,Z.Y0)(i,[h.gb.MINI_SEARCH_GRID]))return(0,E.jsx)(X,{searches:s});if((0,Z.Y0)(i,[h.gb.BASIC]))return null;else if((0,Z.Y0)(i,[h.gb.TEXT]))return(0,E.jsx)(r.xu,{width:h.zM,children:(0,E.jsx)(r.xv,{children:t})})}render(){let{currentSite:e,handleClick:t,handleObjectSubscriptionById:i,headerText:s,headerIconImageUrl:n,headerIconObjects:o,headerSmallOverlayIconUrl:l,headerSmallOverlayIconUrlDark:a,id:d,isVerticalNavEnabled:c,isSideBarEnabled:u,sideBarWidth:p,isHighlightNotif:g,lastUpdatedAt:_,siteType:m,textMapping:w,titleText:f,subscribableObjects:x,subscribedToObjectIdMap:b,type:v,viewer:y}=this.props,{overrideClickUrl:j}=this.props;j&&void 0!==(0,O.Z)(j)&&(j=(0,z.Z)(j,{entrySource:"news_hub"}));let I=!!y.isAuth&&y.isLimitedLogin,S=j||"/news_hub/"+d,P=(0,M.Z)(S),T=P?S:(0,Q.Z)({currentSiteType:m,destinationSiteType:0,inputPath:S}),{displayComponent:N}=this,H=j?(0,U.sD)(j):null,L="DESKTOP"===e||P?T:R.C0.concat(T),Z=H&&!P?j:L,k=g?h.yf:{},D=u?p-28:c?h.d1:h.V$;return(0,E.jsx)(r.Zf,{overflow:"visible",children:(0,E.jsxs)(r.xu,{alignItems:"center",borderStyle:"none",color:this.state.isMouseOverComponent&&!this.state.isMouseOverEllipsis?g?"transparent":"secondary":"transparent",dangerouslySetInlineStyle:{__style:{cursor:"pointer",borderColor:"#E9E9E9",...k}},"data-test-id":"news-hub-list-item",direction:"column",display:"flex",marginBottom:1,marginEnd:2,marginStart:2,onMouseEnter:()=>this.setState({isMouseOverComponent:!0}),onMouseLeave:()=>this.setState({isMouseOverComponent:!1}),padding:2,rounding:4,width:D,children:[(0,E.jsxs)(r.kC,{alignItems:"center",width:"100%",children:[(0,E.jsx)(r.Tg,{href:Z,onTap:this.getHandleClickFun(Z),target:H?"blank":null,children:(0,E.jsxs)(r.kC,{alignItems:"center",justifyContent:"start",children:[(n||o)&&(0,E.jsx)(C,{headerIconImageUrl:n,headerIconObjects:o,headerSmallOverlayIconUrl:l,headerSmallOverlayIconUrlDark:a}),(0,E.jsx)(r.xu,{dangerouslySetInlineStyle:{__style:{margin:"0 8px"}},display:"flex",marginEnd:1===x.length?2:1,marginStart:2*(void 0===o),children:(0,E.jsxs)(r.X6,{accessibilityLevel:2,children:[f&&(0,E.jsx)(r.xu,{children:(0,E.jsx)(r.xv,{weight:"bold",children:f})}),(0,E.jsx)(r.xv,{inline:!0,children:(0,E.jsx)(q.Z,{text:s,textMapping:w})})]})})]})}),(0,E.jsxs)(r.xu,{direction:"column",display:"flex",marginEnd:1,minHeight:h.pv,position:"relative",width:c?h.Z1:h.Cc,children:[(0,E.jsx)(r.xu,{marginBottom:1,marginEnd:1,overflow:"hidden",children:(0,E.jsx)(r.xv,{align:"end",color:"subtle",size:"100",children:(0,A.Z)(new Date(_),this.props.getHumanizedTimeSince)?.replace(/\u00A0|&nbsp;/g," ")})}),!I&&(0,E.jsx)(r.xu,{alignSelf:"end",children:(0,E.jsx)(W,{handleClick:t,handleEnterEllipsis:()=>this.setState({isMouseOverEllipsis:!0}),handleExitEllipsis:()=>this.setState({isMouseOverEllipsis:!1}),handleObjectSubscriptionById:i,isMouseOverEllipsis:this.state.isMouseOverEllipsis,newsId:d,newsType:v,subscribableObjects:x,subscribedToObjectIdMap:b})})]})]}),!!N&&(0,E.jsx)(r.Tg,{accessibilityLabel:"News Detail Page",href:Z,onTap:this.getHandleClickFun(Z),children:(0,E.jsx)(r.xu,{"aria-hidden":!0,marginTop:2,children:N})})]})})}componentDidMount(){(0,s.Z)("ListItem","/app/www/growth/news/NewsHub/ListItem/ListItem.tsx")}}et(ei,"defaultProps",{subscribableObjects:[]});let es=(0,y.Z)(function(e){(0,n.useEffect)(()=>{(0,s.Z)("ListItem","/app/www/growth/news/NewsHub/ListItem/ListItem.tsx")},[]);let{logContextEvent:t}=(0,o.u)(),i=(0,L.Z)(),r=(0,l.ZP)(),a=(0,H.Z)(),d=(0,K.Z)(),{sideBarWidth:h}=(0,ee.Z)();return(0,E.jsx)(ei,{...e,currentSite:(0,J.I)().currentSite,getHumanizedTimeSince:i,i18n:r,isSideBarEnabled:d,logContextEvent:t,sideBarWidth:h,viewer:a})});var en=i(355940);class er extends n.PureComponent{render(){return(0,E.jsx)(n.Fragment,{children:(0,E.jsx)(en.Z,{name:"FirstStoryExperience",children:(0,E.jsx)(r.xu,{width:h.V$})})})}}var eo=i(209026);function el({handleDismissPanel:e}){(0,n.useEffect)(()=>{(0,s.Z)("NotificationEmptyStatePage","/app/www/growth/news/NewsHub/NewsHubPanel/NotificationEmptyStatePage.tsx")},[]);let t=(0,l.ZP)(),i=(0,u.TH)(),{logContextEvent:a}=(0,o.u)();return(0,E.jsx)(r.xu,{alignItems:"center",display:"flex",height:`calc(100% - ${h.uZ}px)`,justifyContent:"center",top:!0,width:h.hy,children:(0,E.jsx)(r.xu,{display:"flex",justifyContent:"center",marginBottom:5,width:"100%",children:(0,E.jsx)(eo.Z,{containerSize:320,description:t.bt("Utilisez les mises à jour pour voir l’activité sur vos Épingles et vos tableaux et obtenir des conseils sur les sujets à explorer. Elles seront bientôt disponibles.", "Use updates to see activity on your Pins and boards and get tips on topics to explore. They’ll be here soon.", "notifications.sunglasses.illustrations.description", undefined, true),illustrationSize:186,message:t.bt("Des mises à jour sont en cours", "Updates are on their way", "notifications.sunglasses.illustrations.message", undefined, true),name:"sunglasses",primaryAction:["/","/homefeed"].includes(i.pathname)?null:(0,E.jsx)(r.ZP,{href:"/",onClick:()=>{a({event_type:101,view_type:107,view_parameter:3083,component:13583}),e()},text:t.bt("Parcourir la page d’accueil", "Browse home feed", "notificatons.sunglasses.illustration", undefined, true)})})})})}var ea=i(382112),ed=i(780869);function eh(e,t,i){var s;return(t="symbol"==typeof(s=function(e,t){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var s=i.call(e,t||"default");if("object"!=typeof s)return s;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?s:s+"")in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class ec extends n.Component{constructor(e){super(e),eh(this,"handleItemClick",()=>{this.props.handleItemClick()}),eh(this,"handleObjectSubscriptionById",(e,t)=>{this.setState(({subscribedToObjectIdMap:i})=>({subscribedToObjectIdMap:{...i,[e]:t}}))}),eh(this,"renderItem",(e,t,i,s,n)=>{let r={...this.state.subscribedToObjectIdMap};e.subscribable_objects&&e.subscribable_objects.forEach(e=>{void 0===r[e.id]&&(r[e.id]=e.subscribed_to_notifications)});let o={impressionAuxFields:{newsType:e.news_type},impressionType:"News",loggingId:e.id,slotIndex:t,viewParameter:3081,viewType:107},l=(0,E.jsx)(es,{contentItemCount:e.content_item_count,contentItems:e.content_items,contentText:e.content_text,displayMode:e.encoded_display_mode,handleClick:this.handleItemClick,handleObjectSubscriptionById:this.handleObjectSubscriptionById,headerIconImageUrl:e.header_icon_image_url,headerIconObjects:e.header_icon_objects,headerSmallOverlayIconUrl:e.header_small_overlay_icon_image_url,headerSmallOverlayIconUrlDark:e.header_small_overlay_icon_image_url_dark,headerText:e.header_text,id:e.id,isHighlightNotif:n,isVerticalNavEnabled:this.props.isVerticalNavEnabled,lastUpdatedAt:e.last_updated_at,overrideClickUrl:e.override_click_url,requestContext:this.props.requestContext,shouldHighlight:null!==i&&s,subHeaderText:e.sub_header_text,subscribableObjects:e.subscribable_objects,subscribedToObjectIdMap:r,textMapping:e.text_mapping,titleText:e.title_text,type:e.news_type,unread:e.unread,...o});return null!==i?(0,E.jsx)("li",{ref:i,children:l},t):(0,E.jsx)("li",{id:e.id,children:l},t)}),eh(this,"renderTopStoryExperience",()=>(0,E.jsx)(er,{})),eh(this,"renderBottomSection",()=>this.props.isIaNavUpdForEngagementExperiment&&(0,E.jsx)(r.xu,{bottom:!0,"data-test-id":"news-engagement-button",marginEnd:2,marginStart:3,paddingY:3,position:"absolute",width:340,children:(0,E.jsx)(m.ZP,{fullWidth:!0,href:this.props.engagementUrl,logEventProps:{},onClick:this.props.onClickEngagementButton,text:this.props.i18n.bt("Afficher l’engagement de l’audience", "View audience engagement", "ads.notifications.center.goToEngagementButton", undefined, true)})},"btn-view-engagement-page")),this.state={subscribedToObjectIdMap:{}}}componentWillUnmount(){this.props.newsHubResource.refresh()}componentDidMount(){(0,s.Z)("NewsHubPanel","/app/www/growth/news/NewsHub/NewsHubPanel/NewsHubPanel.tsx"),this.logPanelImpression()}logPanelImpression(){let{logContextEvent:e,viewType:t,viewParameter:i}=this.props;e({event_type:13,view_type:107,view_parameter:3081}),e({event_type:13,view_type:t,view_parameter:i})}render(){return(0,E.jsx)(b.Z,{view:107,viewParameter:3081,children:(0,E.jsx)(ea.Z,{handleScrollShadow:this.props.handleScrollShadow,highlightId:this.props.highlightScrollSidebar?this.props.utmNewsHubId:null,listResource:this.props.newsHubResource,renderBottomSection:this.renderBottomSection,renderEmptyState:()=>(0,E.jsxs)(r.xu,{children:[(0,E.jsx)(el,{handleDismissPanel:this.handleItemClick}),this.renderBottomSection()]}),renderItem:this.renderItem,renderSectionHeaders:!0,renderTopStoryExperience:this.renderTopStoryExperience,shouldHighlightListItem:this.props.highlightScrollSidebar,shouldScrollToItem:this.props.highlightScrollSidebar})})}}function eu(e){(0,n.useEffect)(()=>{(0,s.Z)("NewsHubPanel","/app/www/growth/news/NewsHub/NewsHubPanel/NewsHubPanel.tsx")},[]);let{logContextEvent:t}=(0,o.u)(),i=(0,l.ZP)(),r=(0,d.B)(),a=(0,u.s0)(),c=(0,w.Z)({name:"NewsHubResource",options:{page_size:h.QX},noCache:!0}),{viewType:m,viewParameter:b}=(0,_.SU)(),{is_sterling_on_steroids:y}=(0,p.N)(),j=(0,f.Z)(),{isAnalyticsSite:I,isSterlingSite:S,isTrendsSite:P}=(0,g.Z)(j),T=S||I||y||P?x.i$J:x.hzH,C=(0,ed.Z)(),A=(0,v.Ri)(t);return(0,E.jsx)(ec,{...e,engagementUrl:T,i18n:i,isIaNavUpdForEngagementExperiment:C,logContextEvent:t,navigate:a,newsHubResource:c,onClickEngagementButton:A,requestContext:r,viewParameter:b,viewType:m})}eh(ec,"defaultProps",{handleItemClick:()=>{},onClickEngagementButton:()=>{}});let ep=({showShadow:e,selectedIndex:t,onChange:i,tabItems:o})=>((0,n.useEffect)(()=>{(0,s.Z)("NewsHubTabbedHeader","/app/www/growth/news/NewsHub/NewsHubPanel/NewsHubTabbedHeader.tsx")},[]),(0,E.jsx)(r.xu,{dangerouslySetInlineStyle:{__style:c(e)},"data-test-id":"news-hub-title",children:(0,E.jsx)(r.xu,{paddingX:3,width:"100%",children:(0,E.jsx)(r.sY,{items:o,onChange:({activeIndex:e})=>{i(e)},selectedItemIndex:t})})}));var eg=i(230543),e_=i(244529),em=i(74459),ew=i(77836),ef=i(78762);let ex=(0,ef.Z)(()=>i.e("88010").then(i.bind(i,23997)),void 0,e=>23997,"app-sterling-AdsNotificationsCenterDropdown-AdsNotificationsCenterPanel",e=>["88010"]),eb=(0,ef.Z)(()=>i.e("3967").then(i.bind(i,550597)),void 0,e=>550597,"app-sterling-AdsNotificationsCenterDropdown-AdsNotificationsCenterTabHeader",e=>["3967"]);function ev({handleDismissPanel:e,highlightScrollSidebar:t,newsButton:i,show:u,utmNewsHubId:p}){(0,n.useEffect)(()=>{(0,s.Z)("NewsHubSidebar","/app/www/growth/news/NewsHub/NewsHubPanel/NewsHubSidebar.tsx")},[]);let{logContextEvent:g}=(0,o.u)(),_=(0,l.ZP)(),m=(0,n.useRef)(null),w=(0,d.B)(),f=(0,em.Z)(),{enabled:x}=(0,e_.Z)(),b=(0,K.Z)(),{sideBarWidth:v,togglePanelState:y}=(0,ee.Z)(),j=w.advertiser?.id,I=!!j,[S,P]=(0,n.useState)(+!!I),[T,C]=(0,n.useState)(!1),A=t=>{let{target:s}=t,{current:n}=m,r=n&&s instanceof Node&&!n.contains(s),o=i&&s instanceof Node&&i.contains(s),l=s instanceof HTMLElement&&s.offsetParent?.id===h.C;!r||o||l||e()},N=(0,n.useMemo)(()=>[_.bt("Épingles", "Pins", "New title for news hub dropdown on the right upper corner in home page", undefined, true),(0,E.jsx)(eb,{fallback:(0,E.jsx)(r.xv,{color:1===S?"default":"subtle",size:"200",weight:"bold",children:_.bt("Annonces", "Ads", "[m10n]newshubSidebar.header.tabLabel", undefined, true)}),requestContextAdvertiserId:w.advertiser?.id??"",showing:1===S},`${u.toString()}${S}`)],[w,S,_,u]);(0,n.useEffect)(()=>(document.addEventListener("mousedown",A),()=>document.removeEventListener("mousedown",A)),[]);let H=u?"0px":"-25px",L=(0,n.useCallback)(t=>{t.keyCode===a.Z.ESCAPE&&e()},[]);(0,n.useEffect)(()=>(document.addEventListener("keydown",L,!1),()=>{document.removeEventListener("keydown",L,!1)}),[]),(0,n.useEffect)(()=>{if(1!==S)return;let{component:e,element:t,event:i,view:s,viewParameter:n}={component:8,element:11840,event:101,view:412,viewParameter:3465};g({event_type:i,component:e,element:t,view_type:s,view_parameter:n,aux_data:{current_page_url:window.location.href,advertiser_id:j}})},[j,g,S]);let{isRTL:Z}=w,z=f+ew.L7,R={width:ew.GJ,maxWidth:ew.GJ+h.Ay,minWidth:h.hy,right:Z?z:void 0,left:Z?void 0:z,boxShadow:"rgba(0, 0, 0, 0.1) -3px 4px 14px 0px"},M={maxWidth:h.HJ,minWidth:h.hy,transition:"top 100ms linear",left:Z?0:void 0,right:Z?void 0:0,boxShadow:"rgba(0, 0, 0, 0.1) -3px 4px 14px 0px"},O={marginTop:0,width:v-.5};return(0,E.jsx)(eg.c,{children:i=>{let s,o;return b?(o=O,s="100vh"):x?(o=R,s=`calc(100vh - ${2*ew.zz}px)`):(o=M,s=`calc(100vh - ${i}px - 8px)`),(0,E.jsx)(r.xu,{ref:m,bottom:!0,color:"default",dangerouslySetInlineStyle:{__style:{marginTop:x?ew.zz:i,overscrollBehavior:"none",top:H,...o}},height:s,id:h.o9,marginBottom:b?void 0:2,marginEnd:b?void 0:2,position:"fixed",rounding:b?void 0:4,tabIndex:-1,children:(0,E.jsxs)(r.kC,{alignItems:"stretch",direction:"column",height:"100%",justifyContent:"start",children:[I?(0,E.jsx)(ep,{onChange:P,selectedIndex:S,showShadow:u&&T,tabItems:N}):(0,E.jsxs)(r.xu,{dangerouslySetInlineStyle:{__style:{...c(u&&T),...x?{paddingBlock:"20px",paddingInline:"16px"}:{}}},"data-test-id":"news-hub-title",direction:b?"row":void 0,display:b?"flex":void 0,justifyContent:b?"between":void 0,children:[(0,E.jsx)(r.X6,{accessibilityLevel:1,align:x?"start":"center",size:x?"400":"300",children:_.bt("Mises à jour", "Updates", "New title for news hub dropdown on the right upper corner in home page", undefined, true)}),b&&(0,E.jsx)(r.hU,{accessibilityLabel:_.bt("Fermer le hub d’actualités", "Close news hub", "navBar.newsHub.header", undefined, true),icon:"cancel",onClick:()=>y("news"),size:"sm"})]}),u?(0,E.jsx)(n.Fragment,{children:0===S?(0,E.jsx)(eu,{handleItemClick:e,handleScrollShadow:C,highlightScrollSidebar:t,isVerticalNavEnabled:x,locale:w.locale,utmNewsHubId:p}):(0,E.jsx)(ex,{onNotificationItemClick:e,requestContextAdvertiserId:j})}):(0,E.jsx)(ea.Z,{listResource:{auxData:{},data:[],fetchMore:()=>{},isAtEnd:!1,isFetching:!1,isLoaded:!1,isRefreshing:!1,refresh:()=>{}},renderEmptyState:()=>(0,E.jsx)(r.xu,{}),renderItem:()=>(0,E.jsx)(r.xu,{})})]})})}})}},64932:function(e,t,i){i.d(t,{Z:()=>a});var s=i(281098),n=i(667294),r=i(20256),o=i(302148),l=i(785893);function a(e){(0,n.useEffect)(()=>{(0,s.Z)("NewsText","/app/www/growth/news/NewsHub/NewsText/NewsText.tsx")},[]);let{applyMarkup:t=!0,applyLink:i=!1,text:a,textMapping:d={}}=e,h={};return d&&Object.keys(d).forEach(e=>{let s=d[e];null!==s&&(s.t?h[e]=s.t.toString():h[e]="",t&&(s.b&&(h[e]=(0,l.jsx)(r.xv,{inline:!0,weight:"bold",children:h[e]},e)),s.r&&(h[e]=(0,l.jsx)(r.xv,{color:"error",inline:!0,children:h[e]},e)),s.l&&i&&(h[e]=(0,l.jsx)(r.rU,{display:"inlineBlock",href:s.l,underline:"hover",children:h[e]},e))))}),(0,l.jsx)(r.xu,{"data-test-id":"updates-link-text",children:(0,l.jsx)(r.xv,{inline:!0,children:a?(0,o.bF)(a,h):null})})}},382112:function(e,t,i){i.d(t,{Z:()=>x});var s=i(281098),n=i(667294),r=i(20256),o=i(19585),l=i(777939),a=i(2929),d=i(159527),h=i(536488),c=i(966279),u=i(771347),p=i(785893);function g(e,t,i){var s;return(t="symbol"==typeof(s=function(e,t){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var s=i.call(e,t||"default");if("object"!=typeof s)return s;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?s:s+"")in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}let _="down",m=!1,w=!0;class f extends n.Component{constructor(e){super(e),g(this,"handleMouseOver",()=>{!this.props.listResource.isFetching&&this._container&&this.setState({highlight:!1})}),g(this,"handleScroll",(0,d.Z)(()=>{if(this.props.listResource.isFetching||!this._container)return;let{handleScrollShadow:e}=this.props;e&&e((0,a.MX)(this._container)>70);let{scrollThreshold:t}=this.props,i=(0,a.aZ)(this._container)-(0,a.MX)(this._container)-(0,a.Uy)(this._container);t&&i<t&&this.fetchMore()},30)),g(this,"addEventListeners",e=>{let{useWindow:t}=this.props;t&&(e=window),this.removeEventListeners(),e&&(t||e.addEventListener("wheel",this.preventScroll),e.addEventListener("scroll",this.handleScroll),e.addEventListener("mouseover",this.handleMouseOver)),this._container=e}),g(this,"getRef",e=>e&&e.id===this.props.highlightId?this.onRefChange:null),g(this,"preventScroll",e=>{if(!this._container)return;let t=e.deltaY<0?"up":_,i=this._container.scrollHeight-this._container.scrollTop-this._container.clientHeight==0,s=0===this._container.scrollTop;(t===_&&i||"up"===t&&s)&&e.preventDefault()}),g(this,"fetchForHighlight",()=>{if(!this.state.isResourceExhausted&&!this.state.isHighlightedItemLoaded&&this.props.listResource.data){let e=!1;this.props.listResource.data.forEach(t=>{t?.id===this.props.highlightId&&(e=!0,this.setState({isHighlightedItemLoaded:!0}))}),e||this.fetchMore()}}),g(this,"onRefChange",e=>{this.setState({highlightedItemRef:e})}),g(this,"handleHighlightAndScrollToItem",()=>{this.props.listResource&&this.props.listResource.data&&!this.state.isResourceExhausted&&!this.state.isHighlightedItemLoaded&&this.fetchForHighlight(),this.state.highlightedItemRef&&!m&&(this.state.highlightedItemRef.scrollIntoView({behavior:"smooth",block:"center"}),m=!0)}),g(this,"fetchMoreIfHidden",e=>{if(this.props.listResource.auxData?.x_pinterest_sli_endpoint_name==="v3_get_news_hub_feed"){let t=h.yS;!this.props.listResource.isFetching&&!this.props.listResource.isAtEnd&&e&&this.props.getShownNewsCount(e)<t&&this.props.listResource.fetchMore()}}),this.state={highlightedItemRef:null,highlight:null,isResourceExhausted:!1,isHighlightedItemLoaded:!1}}componentWillUnmount(){this.removeEventListeners(),m&&(w=!1)}static getDerivedStateFromProps(e,t){return t.highlight?{}:{highlight:e.shouldHighlightListItem}}removeEventListeners(){let{useWindow:e}=this.props,{_container:t}=this;t&&(e||t.removeEventListener("wheel",this.preventScroll),t.removeEventListener("scroll",this.handleScroll),t.removeEventListener("mouseover",this.handleScroll))}fetchMore(){let{_container:e}=this;this.props.listResource.isFetching||(this.props.listResource.isAtEnd&&e?(e.removeEventListener("scroll",this.handleScroll),e.removeEventListener("mouseover",this.handleMouseOver),this.setState({isResourceExhausted:!0})):this.props.listResource.fetchMore())}render(){let{isAdsTab:e,isSideBarEnabled:t,hiddenNews:i,renderEmptyState:s,renderItem:o,renderTopStoryExperience:a,renderBottomSection:d,renderSectionHeaders:c}=this.props;this.props.shouldScrollToItem&&this.handleHighlightAndScrollToItem();let{data:u}=this.props.listResource;if(this.fetchMoreIfHidden(u),!this.props.listResource.isFetching&&u&&(0===this.props.getShownNewsCount(u)||0===u.length))return s();let g=u?.filter(e=>e&&"type"in e&&e?.type==="news"&&!i[e.id]),_=g?.findIndex(e=>e&&"unread"in e&&e?.unread&&(0,l.Y0)(e.encoded_display_mode,[h.gb.HIGHLIGHT_NOTIFICATION]))??-1,m=u&&-1!==_?u[_]:null,f=g?.filter(e=>e&&"unread"in e&&!e?.unread)??[],x=g?.filter((e,t)=>e&&"unread"in e&&e.unread&&t!==_)??[];return(0,p.jsxs)(r.xu,{ref:this.addEventListeners,dangerouslySetInlineStyle:{__style:{clear:"both",height:t?"100%":"calc(100% - 88px)",overflowY:"auto",overflowX:"hidden",wordBreak:"break-word"}},"data-test-id":"scrollable-container",children:[u&&a&&a(),e&&u?u.map((e,t)=>(0,p.jsx)(n.Fragment,{children:o(e,t+1,this.getRef(e),this.state.highlight&&w)},t)):null,!e&&(m||x?.length)?(0,p.jsxs)(n.Fragment,{children:[c&&(0,p.jsx)(r.xu,{marginBottom:2,marginEnd:2,marginStart:2,paddingX:2,children:(0,p.jsx)(r.X6,{accessibilityLevel:1,align:"start",size:"400",children:this.props.i18n.bt("Nouveau", "New", "Title for news hub section containing unread news items", undefined, true)})}),(0,p.jsxs)("ul",{className:"scrollableList","data-test-id":"scrollable-list",children:[m?o(m,0,this.getRef(m),this.state.highlight&&w,!0):null,x?.map((e,t)=>o(e,t,this.getRef(e),this.state.highlight&&w))]})]}):null,!e&&f&&f.length>0?(0,p.jsxs)(n.Fragment,{children:[c&&(0,p.jsx)(r.xu,{marginBottom:2,marginEnd:2,marginStart:2,paddingX:2,children:(0,p.jsx)(r.X6,{accessibilityLevel:1,align:"start",size:"400",children:this.props.i18n.bt("Vu", "Seen", "Title for news hub section containing read news items", undefined, true)})}),(0,p.jsx)("ul",{className:"scrollableList","data-test-id":"scrollable-list",children:f.map((e,t)=>o(e,t,this.getRef(e),this.state.highlight&&w))})]}):null,this.props.listResource.isAtEnd?null:(0,p.jsx)(r.xu,{dangerouslySetInlineStyle:{__style:{padding:"5%"}},"data-test-id":"loadingItem",height:"20%",position:"relative",children:(0,p.jsx)(r.xH,{accessibilityLabel:this.props.i18n.bt("Chargement des articles", "Loading items", " - ", undefined, true),show:this.props.listResource.isFetching})}),d&&d()]})}componentDidMount(){(0,s.Z)("ScrollableList","/app/www/growth/news/ScrollableList/ScrollableList.tsx")}}function x(e){(0,n.useEffect)(()=>{(0,s.Z)("ScrollableList","/app/www/growth/news/ScrollableList/ScrollableList.tsx")},[]);let t=(0,o.ZP)(),{getShownNewsCount:i}=(0,c.nJ)(),{hiddenNews:r}=(0,c.mv)(),l=(0,u.Z)();return(0,p.jsx)(f,{...e,getShownNewsCount:i,hiddenNews:r,i18n:t,isSideBarEnabled:l})}g(f,"defaultProps",{scrollThreshold:400,useWindow:!1,handleScrollShadow:()=>{},highlightId:null,shouldScrollToItem:!1})},197891:function(e,t,i){i.d(t,{Z:()=>r});var s=i(483180);let n={0:s.C0,3:s.vI,4:s.YD};function r({currentSiteType:e,destinationSiteType:t,inputPath:i}){let s=Object.keys(n).includes(String(e))&&Object.keys(n).includes(String(t)),r="/"===i[0]?i:`/${i}`;return s&&t!==e?`${n[t]}${r}`:r}}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/94057.fr-8a9b21ed4aa1ec20.mjs.map