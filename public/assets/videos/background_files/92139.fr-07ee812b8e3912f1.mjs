(self.modernJsonp=self.modernJsonp||[]).push([["92139"],{461093:function(e,t,i){i.d(t,{hw:()=>r,r9:()=>l,sh:()=>o});var s=i(147227),a=i(657043);let l=(e,t)=>t?"100%":e?s.Qi:s.$A,o=e=>e?"100%":"95%",r=e=>({message:(0,a.Z)(e,"message"),api_error_code:(0,a.Z)(e,"api_error_code"),error_code:(0,a.Z)(e,"error_code"),code:(0,a.Z)(e,"code"),httpStatus:(0,a.Z)(e,"httpStatus")})},147227:function(e,t,i){i.d(t,{$A:()=>o,J7:()=>s,MB:()=>_,NJ:()=>p,PF:()=>f,Qi:()=>r,_f:()=>l,a2:()=>g,aN:()=>a,aS:()=>b,br:()=>y,f$:()=>v,jI:()=>c,n7:()=>n,qm:()=>h,rd:()=>m,ts:()=>d,vB:()=>A,vF:()=>x,x1:()=>u,yg:()=>P});let s="#f0f0eb",a="#c957bd",l="100",o="469px",r="900px",n=600,c={__style:{backgroundColor:"#E9E4FF"}},_="520px",d="180px",u=2,h="@",p=2,b=e=>({"Thinking about the question":e.bt("Réflexion sur la question", "Thinking about the question", "concierge.components.chat.thinking.steps.text", undefined, true),Finish:e.bt("Terminer", "Finish", "concierge.components.chat.finish.steps.text", undefined, true),"Generating the response":e.bt("Génération de la réponse", "Generating the response", "concierge.components.chat.generating.steps.text", undefined, true),"Classifying the question":e.bt("Classification de la question", "Classifying the question", "concierge.components.chat.classifying.steps.text", undefined, true),"Fetching the data tables":e.bt("Récupération des tableaux de données", "Fetching the data tables", "concierge.components.chat.fetching.steps.text", undefined, true),"Generating the query":e.bt("Génération de la requête", "Generating the query", "concierge.components.chat.query.steps.text", undefined, true),"Picking up the best query":e.bt("Choix de la meilleure requête", "Picking up the best query", "concierge.components.chat.best.query.steps.text", undefined, true),"Validating the query":e.bt("Validation de la requête", "Validating the query", "concierge.components.chat.validating.steps.text", undefined, true),"Correcting the query":e.bt("Correction de la requête", "Correcting the query", "concierge.components.chat.correcting.steps.text", undefined, true),"Using SQL":e.bt("Utilisation du langage SQL", "Using SQL", "concierge.components.chat.sql.steps.text", undefined, true),"Executing the query":e.bt("Exécution de la requête", "Executing the query", "concierge.components.chat.executing.steps.text", undefined, true),"The query execution is finished":e.bt("L’exécution de la requête est terminée", "The query execution is finished", "concierge.components.chat.query.finished.steps.text", undefined, true),Error:e.bt("Erreur", "Error", "concierge.components.chat.error.steps.text", undefined, true)}),m=["helix-users","helix-dev"],g="#pinnacle-feedback",f="https://pinterest.enterprise.slack.com/archives/C08K7TVLWJC",A="https://i.pinimg.com/originals/32/78/fb/3278fb42c068009b300151775abf22cd.png",P="https://i.pinimg.com/originals/0e/73/84/0e738478d913ac3c7d699e74918e3d9a.png",y="https://i.pinimg.com/originals/56/36/d3/5636d36bfe20b378b6a946ffc2b8dcee.png",v="https://i.pinimg.com/originals/7a/c0/dd/7ac0ddee9dcf249927b5e6a9d9363418.png",x={CUSTOMIZED_COMPONENT_BASE64_IMAGE:"customized_component_base64_image"}},903760:function(e,t,i){i.d(t,{D:()=>c,q:()=>_});var s=i(281098),a=i(667294),l=i(825332),o=i(378888),r=i(785893);let n=(0,a.createContext)(!1);function c({children:e}){(0,a.useEffect)(()=>{(0,s.Z)("InAppFactoryOAuthContext","/app/packages/InAppFactoryOAuthContext.tsx")},[]);let t=(()=>{let e=(0,l.TH)();return e.state?.isAppFactoryOAuth||((0,o.mB)(e.search).next??"").startsWith("/app-factory-oauth/")})(),[i,c]=(0,a.useState)(t);return(0,a.useEffect)(()=>{t&&c(!0)},[t]),(0,r.jsx)(n,{value:i,children:e})}function _(){return(0,a.useContext)(n)}},650906:function(e,t,i){i.d(t,{Z:()=>W});var s=i(281098),a=i(667294),l=i(825332),o=i(78730),r=i(346955),n=i(158671),c=i(20256),_=i(667835),d=i(15667),u=i(647709),h=i(785893);function p({children:e}){(0,a.useEffect)(()=>{(0,s.Z)("GestaltDesignTokensProvider","/app/packages/gestaltExtensions/GestaltDesignTokensProvider.tsx")},[]);let t=(0,_.vs)(),i=(0,u.HG)(),{locale:l}=(0,d.B)();return(0,h.jsx)(c.Ag,{colorScheme:t&&!i?"dark":"light",children:(0,h.jsx)(c.Ho,{languageMode:{"ar-SA":"tall","bn-IN":"tall","hi-IN":"tall","te-IN":"tall","ko-KR":"ck","zh-CN":"ck","zh-TW":"ck",ja:"ja","th-TH":"th","vi-VN":"vi"}[l]??"default",children:e})})}function b({children:e}){(0,a.useEffect)(()=>{(0,s.Z)("GestaltDeviceTypeProvider","/app/packages/gestaltExtensions/GestaltDeviceTypeProvider.tsx")},[]);let t=(0,u.ml)();return(0,h.jsx)(c.Q_,{deviceType:t?"mobile":"desktop",children:e})}let m=[];function g({children:e}){(0,a.useEffect)(()=>{(0,s.Z)("GestaltExperimentProvider","/app/packages/gestaltExtensions/GestaltExperimentProvider.tsx")},[]);let t=(0,d.B)();(0,a.useMemo)(()=>({web_gestalt_calico:{anyEnabled:!0,group:"enabled"}}),[]);let i=m.reduce((e,i)=>({...e,[i]:t.experimentsClient.checkExperiment(i)}),{});return(0,h.jsx)(c.II,{value:i,children:e})}var f=i(816358),A=i(611282),P=i(104659);function y({children:e}){(0,a.useEffect)(()=>{(0,s.Z)("GestaltGlobalEventsHandlerProvider","/app/packages/gestaltExtensions/GestaltGlobalEventsHandlerProvider.tsx")},[]);let{sheetMobileHandlers:t,linkHandlers:i}=function(){let{setAppFocusState:e}=(0,P.G)(),t=(0,a.useCallback)(()=>{f.Z.pause(),e(!1)},[e]),i=(0,a.useCallback)(()=>{f.Z.resume(),e(!0)},[e]),s=(0,a.useMemo)(()=>({onOpen:t,onClose:i}),[t,i]);return{linkHandlers:(0,a.useMemo)(()=>({onNavigation:({href:e,target:t})=>(0,A.Z)({href:e,target:t})}),[]),sheetMobileHandlers:s}}();return(0,h.jsx)(c.uu,{linkHandlers:i,sheetMobileHandlers:t,children:e})}var v=i(390843),x=i(35814),w=i(903760),z=i(675973),E=i(368177),L=i(901360),T=i(529547),I=i(622481),k=i(282803),C=i(392824),D=i(735201),S=i(524447),B=i(293169),R=i(430635);let N=e=>["/advertiser/"].reduce((t,i)=>e.includes(i)||t,!1);function Z({children:e,immutableLocation:t,routerHistoryAction:i,staticContext:l}){(0,a.useEffect)(()=>{(0,s.Z)("PwtContext","/app/packages/pwt-logger/PwtContext.tsx")},[]);let o=(0,a.useRef)(null),r=(0,a.useRef)(null),n=(0,a.useRef)(t),c=(0,a.useRef)(!0),{path:_,params:d}=(0,R.Z)(),u=(0,a.useRef)(_),p=(0,a.useRef)(d),b=(0,T.Z)(l.deviceType);if(c.current&&(0,D.ZP)(!0,l.serverData?.trace_id),(0,a.useEffect)(()=>{u.current=_},[_]),(0,a.useEffect)(()=>{p.current=d},[d]),(0,a.useEffect)(()=>{(0,S.UQ)(),c.current=!1},[]),N(t.pathname)?n.current.pathname!==t.pathname:n.current!==t){n.current=t,r.current=window.performance?.now?window.performance.now():null;let{current:e}=r;if(!c.current){let t=!o.current;(0,L.A9)("routeStart",{tags:{action:i}}),(0,B.Eg)(t),(0,S.Ux)(t),(0,S.on)(),(0,C.tl)(),(0,D._T)(),(0,D.ZP)(!1);let{defaultBufferSize:s}=(0,B.LH)();e&&((0,L.A9)("routeStart.defaultBufferSize",{count:s}),o.current={time:e,action:i})}}return(0,h.jsx)(k.Z,{value:b?l:null,children:(0,h.jsx)(I.Z,{value:o.current,children:e})})}var j=i(939672),M=i(30880),O=i(754545),F=i(956077),G=i(603316);function V({children:e,immutableLocation:t,routerHistoryAction:i}){let s=(0,a.useRef)(!0),l=(0,a.useRef)(!1),o=(0,a.useRef)(!1),r=(0,a.useRef)(t),n=performance.now(),{group:c}=(0,z.Z)().checkExperiment("web_pwt_validate_suspense");return c&&(0,G.nP)("pwt_logger_v4_render",{sampleRate:1,tags:{experimentGroup:c}}),l.current=l.current||N(t.pathname)?r.current.pathname!==t.pathname:r.current!==t,l.current&&!o.current&&((0,O.yh)("routeChange"),o.current=!0,(0,j.N0)(),c&&(0,G.nP)("pwt_logger_v4_route_change_reset",{sampleRate:1,tags:{experimentGroup:c}})),(0,a.useLayoutEffect)(()=>{if((N(t.pathname)?r.current.pathname!==t.pathname:r.current!==t)||s.current){r.current=t;let e=s.current?0:n;(0,O.ep)(i,e,s.current),(0,F.Nx)("NavigationCompletev4"),s.current=!1,l.current=!1,o.current=!1,c&&(0,G.nP)("pwt_logger_v4_navigation_complete",{sampleRate:1,tags:{experimentGroup:c}})}},[s,i,t,n,l]),e}function H({children:e,immutableLocation:t,routerHistoryAction:i}){return((0,a.useEffect)(()=>{(0,s.Z)("PerformanceLoggingRoutingContext","/app/packages/pwt-logger/v4/PerformanceLoggingRoutingContext.tsx")},[]),(0,M.Z)())?(0,h.jsx)(j.mW,{children:(0,h.jsx)(V,{immutableLocation:t,routerHistoryAction:i,children:e})}):e}var U=i(791948);function q({children:e,traceLoggerData:t}){let i=(0,d.B)(),s=(0,l.ur)(),a=(0,l.TH)(),{group:o}=(0,z.Z)().checkExperiment("web_pwt_validate_suspense"),r=(0,E.Z)({requestContext:i,traceLoggerData:t});return(0,L.iF)(s),"enabled_switch_v4_v3"===o?(0,h.jsx)(H,{immutableLocation:a,routerHistoryAction:s,children:(0,h.jsx)(Z,{immutableLocation:a,routerHistoryAction:s,staticContext:r,children:e})}):(0,h.jsx)(Z,{immutableLocation:a,routerHistoryAction:s,staticContext:r,children:(0,h.jsx)(H,{immutableLocation:a,routerHistoryAction:s,children:e})})}function W({children:e,context:t,otaData:i,inContextTranslation:l,requestContext:c,resourceCreator:_,traceLoggerData:d}){(0,a.useEffect)(()=>{(0,s.Z)("WebappProvider","/app/packages/WebappProvider.tsx")},[]);let{anyEnabled:u}=(0,z.Z)().checkExperiment("web_pwt_validate_suspense"),m=(0,h.jsx)(b,{children:(0,h.jsx)(g,{children:(0,h.jsx)(p,{children:(0,h.jsx)(n.Z,{children:(0,h.jsx)(v.nK,{children:(0,h.jsx)(P.g,{children:(0,h.jsx)(y,{children:(0,h.jsx)(r.Ih,{children:(0,h.jsx)(w.D,{children:(0,h.jsx)(U.UZ,{resourceCreator:_,children:e})})})})})})})})})});return(0,h.jsx)(o.E,{value:t,children:u?(0,h.jsx)(q,{traceLoggerData:d,children:(0,h.jsx)(x.Z,{enableInContextTranslation:l,locale:c.locale,otaData:i,children:m})}):(0,h.jsx)(x.Z,{enableInContextTranslation:l,locale:c.locale,otaData:i,children:(0,h.jsx)(q,{traceLoggerData:d,children:m})})})}},672431:function(e,t,i){i.d(t,{ES:()=>o,I3:()=>l,TY:()=>r,YX:()=>s,aD:()=>a});let s=1e4,a=300,l=[9,3],o={13:"VIEW",4703:"TIMED_PAIR_END",82:"PIN_SAVE_TO_DEVICE",8948:"PIN_CLICK"},r={9:"LOGIN",3:"PIN",186:"OFF_PINTEREST",11:"BROWSER"}},83896:function(e,t,i){let s,a;i.d(t,{li:()=>C,Ch:()=>z,nc:()=>D,a:()=>S,ZP:()=>B,cA:()=>k});var l=i(172045),o=i(898582),r=i(575108),n=i(461093),c=i(296086),_=i(672431);function d(e,t,i){var s;return(t="symbol"==typeof(s=function(e,t){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var s=i.call(e,t||"default");if("object"!=typeof s)return s;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?s:s+"")in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}let u="exponential";function h(e,t){let i=Math.max(e,0),s=Math.max(t,i);return Math.floor(i+Math.random()*(s-i+1))}class p{constructor(e={}){d(this,"strategy",u),d(this,"attempts",0),this.strategy=e.strategy??u}changeStrategy(e){this.strategy=e,this.attempts=0}next(){let e=function(e,t){if(e===u){let e=1e4*Math.pow(2,t);return h(Math.min(e,9e5),Math.min(Math.floor(1.5*e),9e5))}{let e=Math.max(6e5-6e4*t,0);return Math.max(Math.min(h(e,e*(1+.5*Math.pow(.6,t))),9e5),6e4)}}(this.strategy,this.attempts);return this.attempts+=1,e}}var b=i(973160),m=i(346955),g=i(810288),f=i(991384),A=i(2420),P=i(734215),y=i(664450),v=i(603316);let x=new Set([6945,170,3700]),w=new Set([3700]),z={3829:"articleImpressions",18:"pinImpressions",3700:"boardImpressions",3803:"searchImpressions",170:"storyImpression",3704:"userImpressions"},E=[4700,4701,4702,4703,7042,7043],L=e=>(0,g.Z)(JSON.stringify(e)),T=e=>x.has(e);function I(){let e=new Date;s?s&&s.getUTCDate()!==e.getUTCDate()&&(s=e,(0,c.Z)()):s=e}let k=e=>{let t=e.event_type,i=E.includes(t),s=(0,m.BE)();return!!i||13===t||!!s},C=(e,t)=>{let i=e.event_type,s=E.includes(i),a=(0,m.BE)();return s?e:13===i&&e.view_type?(t?.({viewType:e.view_type,viewParameter:e.view_parameter,viewData:a?.viewData?(0,f.Z)(a.viewData,e.view_data):e.view_data}),e):!a||e.view_type&&e.view_parameter?e:{...e,view_type:a.viewType||e.view_type,view_parameter:a.viewParameter,view_data:e.view_data?(0,f.Z)(e.view_data,a.viewData):a.viewData}},D=(e,t)=>{let{component:i,element:s}=e,a=e.object_id_str,l=e.view_type,o=e.event_type,{appState:r}=e;return(e.event_data?.[t]||[]).map(n=>{var c;let _;return{auxData:e.aux_data,...i?{component:i}:{},eventData:n,...o?{eventType:o}:{},...l?{viewType:l}:{},viewData:e.view_data,viewParameter:e.view_parameter,...a?{objectIdStr:a}:null,impressionType:t,...(c=e.event_data,_={},c?.storyPinProductEventData&&(_={..._,storyPinProductEventData:c.storyPinProductEventData}),_),appState:r,...s?{element:s}:{}}})??[]},S=(e,t)=>({...e.component?{component:e.component}:{},...e.object_id_str?{objectIdStr:e.object_id_str}:null,...e.view_type?{viewType:e.view_type}:{},eventType:e.event_type,auxData:e.aux_data,impressionType:t,viewData:e.view_data,viewParameter:e.view_parameter,eventData:e.event_data});function B(e){let t=[],i=[],s=0,c=!1,d=!1;function h(){return[...t,...i.reduce((e,t)=>{let i=e.find(e=>e.view_type===t.viewType&&e.view_parameter===t.viewParameter&&e.event_type===t.eventType&&e.object_id_str===t.objectIdStr&&(0,P.Z)(e.view_data,t.viewData));if(i&&!T(t.eventType))t.impressionType in i.event_data?i.event_data[t.impressionType].push(t.eventData):i.event_data[t.impressionType]=[t.eventData];else{let i,s=t.storyPinProductEventData?{storyPinProductEventData:t.storyPinProductEventData}:{},a={appState:t.appState,aux_data:t.auxData||{},clientUUID:(0,l.Z)(),component:t.component,event_data:{...s,[t.impressionType]:!T(i=t.eventType)||T(i)&&w.has(i)?[t.eventData]:{...t.eventData,...(t.eventData||{})[t.impressionType]}},event_type:t.eventType,object_id_str:t.objectIdStr||void 0,time:(0,b.ZP)(),view_data:t.viewData,view_parameter:t.viewParameter,view_type:t.viewType,element:t.element};e.push(a)}return e},[])]}function m({error:e,isError:t,isDroppedEvent:i,isImpression:s,isEventSkipped:a}){let l,r=(0,o.Z)(),n=r?.userAgent||{},c=!(n.isMobile||n.isTablet),_={error_message:e?.message??"unknown",appType:c?"WEB_DENZEL":"WEB_MOBILE",country:r?.country??"unknown",browserName:n.browserName,osName:n.osName,browserType:n.browserType,browserVersion:n.browserVersion,isError:t,isImpression:s,isEventSkipped:a};l=i?"dropped":t?"errors":a?"skipped":"success",(0,v.nP)(`webapp.metrics.contextLog.indexdb.${l}`,{tags:_})}async function g(){try{await a?.clear()}catch(e){m({isError:!0,error:{message:"Error while clearing cache",details:e instanceof Error?e.message:"Unknown error",stack_trace:e instanceof Error?e.stack??"No stack trace available":"No stack trace available",errorName:e instanceof Error?e.name:"N/A"}})}}function f(){t=[],i=[],s=0}async function x(e){try{let t={...e,cache_created_time:(0,b.ZP)(),isImpression:!1,aux_data:{...e.aux_data,is_context_cached:!0}};await a?.setItem((0,l.Z)(),t)}catch(e){m({isError:!0,error:{message:"Transaction could not be added",details:e instanceof Error?e.message:"Unknown error",stack_trace:e instanceof Error?e.stack??"No stack trace available":"No stack trace available",errorName:e instanceof Error?e.name:"N/A"}})}}async function z(e){try{let t={...e,cache_created_time:(0,b.ZP)(),isImpression:!0,auxData:{...e.auxData,is_impression_cached:!0}};await a?.setItem((0,l.Z)(),t)}catch(e){m({isError:!0,isImpression:!0,error:{message:"Transaction could not be added",details:e instanceof Error?e.message:"Unknown error",stack_trace:e instanceof Error?e.stack??"No stack trace available":"No stack trace available",errorName:e instanceof Error?e.name:"N/A"}})}}async function E(){let t=h(),i=0,s=1e3,a=new p;if(!t.length)return;let l=(0,b.ZP)(),m=r.Z.create("ApiCResource",{events:t,report_time:l}),P=async()=>{try{l=(0,b.ZP)(),await m.callCreate({async:!0,showError:!1}),g()}catch(_){let e=(0,n.hw)(_),l=!e?.api_error_code||[A.dO,A.cZ,A.i1].includes(e.api_error_code),r=e?.api_error_code===A.QY||e?.httpStatus===400;if(!function({retryAttempts:e,error:t,events:i}){let s=(0,o.Z)(),a=s?.userAgent||{},l=!(a.isMobile||a.isTablet),r={...t,retryAttempts:e,appType:l?"WEB_DENZEL":"WEB_MOBILE",country:s?.country??"unknown",browserName:a.browserName,eventSize:i.length,osName:a.osName,browserType:a.browserType,browserVersion:a.browserVersion};(0,v.nP)("metrics_quality_web_retry_error_log",{tags:r})}({retryAttempts:i,error:e,events:t}),c){if(r)return void g();l||e?.httpStatus&&e.httpStatus>=500?a.changeStrategy("coolDown"):a.changeStrategy(u);let t=a.next();i+=1,setTimeout(P,t)}else if(l&&i<5){let e=s;i+=1,s*=2,setTimeout(P,e)}else d||g()}};P();var y=l;if(e)for(let e of t)(0,b.Q9)(e)&&(0,v.LY)("webapp.contextLogger.fastFlushEvents.latency",(y-e.time||0)/1e6,{sampleRate:1,tags:{event_type:_.ES[e.event_type],view_type:e.view_type?_.TY[e.view_type]:"unknown",cached:(e.aux_data?.is_timed_pair_cached||e.aux_data?.is_context_cached)??"false"}});f(),I()}async function k(){let e=d?function(e){return(0,b.ZP)()-e<15e9}:function(e){return(0,b.ZP)()-e<6e10},s=d?function(e){return(0,b.ZP)()-e>6048e11}:function(e){return(0,b.ZP)()-e>864e11};try{(await a?.getAllItem()||[]).forEach(a=>{let{value:l}=a,{cache_created_time:o,isImpression:r,...n}=l;s(o)?m({isDroppedEvent:!0,isError:!1}):e(o)?m({isEventSkipped:!0}):r?(i.push(n),m({isImpression:!0,isError:!1})):(t.push(n),m({isError:!1}))})}catch(e){m({isError:!0,error:{message:"Error while syncing cached events",details:e instanceof Error?e.message:"Unknown error",stack_trace:e instanceof Error?e.stack??"No stack trace available":"No stack trace available",errorName:e instanceof Error?e.name:"N/A"}})}finally{d||(E(),g())}}return{flushContextEvents:E,getContextEvents:h,logContextEvent:function({object_id_str:e,...i}){let a=(0,b.ZP)(),o={aux_data:{},event_data:{},view_data:{},...i,time:a,clientUUID:(0,l.Z)(),...e?{object_id_str:e}:null},r=function(e){if(!e)return e;let{element:t,eventData:i,component:s,objectId:a,view:l,viewParameter:o,viewData:r,durationNs:n,pairId:c,clientTrackingParams:_,...d}=e;return d}(o.aux_data);o={...o,aux_data:r},s+L(o)>20480&&E(),t.push(o),s+=L(o),I(),x(o)},logImpression:function(e){s+L(e)>20480&&E(),i.push(e),s+=L(e),z(e)},resetEventsBuffer:f,syncCachedEndEvents:k,_getIndexDBInstance:function(){return a},_setDecreaseSkipCachedEventsExperimentState:function(e){d=e},initiateIndexDBCache:function(){window?.indexedDB&&(a=a||new y.Z(window.indexedDB,"ContextLoggingDB","ContextLoggingTable"))},_setRetryV2ExperimentState:function(e){c=e}}}},973160:function(e,t,i){i.d(t,{Q9:()=>l,ZP:()=>o,sR:()=>a});var s=i(672431);let a=()=>{let e,t;return"undefined"!==document.hidden?(e="hidden",t="visibilitychange"):"undefined"!==document.msHidden?(e="msHidden",t="msvisibilitychange"):"undefined"!==document.webkitHidden&&(e="webkitHidden",t="webkitvisibilitychange"),{hidden:e,visibilityChange:t}},l=e=>{switch(e.event_type){case 13:return!!e.view_type&&s.I3.includes(e.view_type);case 4703:if(3===e.view_type&&85===e.component&&(e.duration_ns||0)>=1e10||186===e.view_type||11===e.view_type)return!0;return!1;case 82:case 8948:return!0;default:return!1}},o=()=>1e6*Date.now()},158671:function(e,t,i){i.d(t,{Z:()=>c,d:()=>n});var s=i(281098),a=i(667294),l=i(20256),o=i(19585),r=i(785893);let n=l.J6;function c({children:e}){(0,a.useEffect)(()=>{(0,s.Z)("GestaltDefaultLabelProvider","/app/packages/gestaltExtensions/GestaltDefaultLabelProvider.tsx")},[]);let t=(0,o.ZP)(),i=(0,a.useMemo)(()=>({Accordion:{accessibilityCollapseLabel:t.bt("Réduire le sous-tableau", "Collapse section", "gestalt.accordion.accessibilityCollapseLabel", undefined, true),accessibilityExpandLabel:t.bt("Étendre le sous-tableau", "Expand section", "gestalt.accordion.accessibilityExpandLabel", undefined, true)},BannerOverlay:{accessibilityDismissButtonLabel:t.bt("Fermer la bannière", "Dismiss banner", "gestalt.bannerOverlay.accessibilityDismissButtonLabel", undefined, true)},ActivationCard:{accessibilityDismissButtonLabel:t.bt("Fermer", "Dismiss", "gestalt.activationCard.accessibilityDismissButtonLabel", undefined, true)},BannerCallout:{accessibilityDismissButtonLabel:t.bt("Fermer la bannière", "Dismiss banner", "gestalt.callout.accessibilityDismissButtonLabel", undefined, true),iconAccessibilityLabelError:t.bt("Erreur", "Error", "gestalt.callout.iconAccessibilityLabelError", undefined, true),iconAccessibilityLabelInfo:t.bt("Information", "Information", "gestalt.callout.iconAccessibilityLabelInfo", undefined, true),iconAccessibilityLabelRecommendation:t.bt("Recommandation", "Recommendation", "gestalt.callout.iconAccessibilityLabelRecommendation", undefined, true),iconAccessibilityLabelWarning:t.bt("Attention", "Warning", "gestalt.callout.iconAccessibilityLabelWarning", undefined, true),iconAccessibilityLabelSuccess:t.bt("Opération réussie", "Success", "gestalt.callout.iconAccessibilityLabelSuccess", undefined, true)},BannerSlim:{accessibilityDismissButtonLabel:t.bt("Fermer la bannière", "Dismiss banner", "gestalt.slimbanner.accessibilityDismissButtonLabel", undefined, true),iconAccessibilityLabelError:t.bt("Erreur", "Error", "gestalt.slimbanner.iconAccessibilityLabelError", undefined, true),iconAccessibilityLabelInfo:t.bt("Information", "Information", "gestalt.slimbanner.iconAccessibilityLabelInfo", undefined, true),iconAccessibilityLabelRecommendation:t.bt("Recommandation", "Recommendation", "gestalt.slimbanner.iconAccessibilityLabelRecommendation", undefined, true),iconAccessibilityLabelWarning:t.bt("Attention", "Warning", "gestalt.slimbanner.iconAccessibilityLabelWarning", undefined, true),iconAccessibilityLabelSuccess:t.bt("Opération réussie", "Success", "gestalt.slimbanner.iconAccessibilityLabelSuccess", undefined, true),iconAccessibilityLabelDefault:t.bt("Logo Pinterest", "Pinterest logo", "gestalt.slimbanner.iconAccessibilityLabelDefault", undefined, true)},ButtonSocial:{textLoginEmail:t.bt("Se connecter avec une adresse e-mail", "Login with Email", "gestalt.buttonsocial.textLoginEmail", undefined, true),textLoginFacebook:t.bt("Se connecter avec Facebook", "Login with Facebook", "gestalt.buttonsocial.textLoginFacebook", undefined, true),textLoginGoogle:t.bt("Se connecter avec Google", "Login with Google", "gestalt.buttonsocial.textLoginGoogle", undefined, true),textLoginApple:t.bt("Se connecter avec Apple", "Login with Apple", "gestalt.buttonsocial.textLoginApple", undefined, true),textLoginLine:t.bt("Connexion avec Line", "Login with Line", "gestalt.buttonsocial.textLoginLine", undefined, true),textContinueEmail:t.bt("Continuer avec adresse e-mail", "Continue with Email", "gestalt.buttonsocial.textContinueEmail", undefined, true),textContinueFacebook:t.bt("Continuer avec Facebook", "Continue with Facebook", "gestalt.buttonsocial.textContinueFacebook", undefined, true),textContinueGoogle:t.bt("Continuer avec Google", "Continue with Google", "gestalt.buttonsocial.textContinueGoogle", undefined, true),textContinueApple:t.bt("Continuer avec Apple", "Continue with Apple", "gestalt.buttonsocial.textContinueApple", undefined, true),textContinueLine:t.bt("Continuer avec Line", "Continue with Line", "gestalt.buttonsocial.textContinueLine", undefined, true),textSignupEmail:t.bt("S'inscrire avec son e-mail", "Sign up with Email", "gestalt.buttonsocial.textSignupEmail", undefined, true),textSignupFacebook:t.bt("S'inscrire via Facebook", "Sign up with Facebook", "gestalt.buttonsocial.textSignupFacebook", undefined, true),textSignupGoogle:t.bt("Inscrivez-vous avec Google", "Sign up with Google", "gestalt.buttonsocial.textSignupGoogle", undefined, true),textSignupApple:t.bt("S’inscrire avec Apple", "Sign up with Apple", "gestalt.buttonsocial.textSignupApple", undefined, true),textSignupLine:t.bt("S’inscrire avec Line", "Sign up with Line", "gestalt.buttonsocial.textSignupLine", undefined, true)},ChartGraph:{accessibilityLabelPrefixText:t.bt("Graphique", "Chart graph.", "gestalt.chartgraph.accessibilityLabelPrefixText", undefined, true),defaultViewText:t.bt("Mode d’affichage par défaut", "Default view mode", "gestalt.chartgraph.defaultViewText", undefined, true),accessibleViewText:t.bt("Affichage du motif visuel", "Visual pattern view", "gestalt.chartgraph.accessibleViewText", undefined, true),tabularData:t.bt("Représentation tabulaire", "Tabular representation", "gestalt.chartgraph.tabularData", undefined, true),accessibilityLabelDismissModal:t.bt("Fermer le modal de représentation tabulaire", "Dismiss tabular representation modal", "gestalt.chartgraph.accessibilityLabelDismissModal", undefined, true),tableSeriesText:t.bt("Série", "Series", "gestalt.chartgraph.tableSeriesText", undefined, true),tableXAxisText:t.bt("Valeurs de l’axe x", "x-axis values", "gestalt.chartgraph.tableXAxisText", undefined, true),tableYAxisText:t.bt("Valeurs de l’axe y", "y-axis values", "gestalt.chartgraph.accessibilityLabelPrefixText", undefined, true),downloadCsvButtonText:t.bt("Télécharger au format .csv", "Download as .csv", "gestalt.chartgraph.downloadCsvButtonText", undefined, true),cancelButtonText:t.bt("Annuler", "Cancel", "gestalt.chartgraph.cancelButtonText", undefined, true)},ComboBox:{noResultText:t.bt("No results", "No results", "gestalt.comboBox.noResultsText", undefined, true),accessibilityClearButtonLabel:t.bt("Effacer la saisie", "Clear input", "gestalt.comboBox.accessibilityClearButtonLabel", undefined, true)},DatePicker:{accessibilityDismissButtonLabel:t.bt("Fermer le sélecteur de date", "Dismiss date picker", "gestalt.datepicker.accessibilityDismissButtonLabel", undefined, true),dismissButton:t.bt("Fermer", "Close", "gestalt.datepicker.dismissButton", undefined, true),openCalendar:t.bt("Ouvrir le calendrier", "Open calendar", "gestalt.datepicker.openCalendar", undefined, true),previousMonth:t.bt("Accéder au mois précédent", "Navigate to previous month", "gestalt.datepicker.previousMonth", undefined, true),nextMonth:t.bt("Accéder au mois suivant", "Navigate to next month", "gestalt.datepicker.nextMonth", undefined, true)},DateRange:{applyText:t.bt("Appliquer", "Apply", "gestalt.daterange.apply", undefined, true),cancelText:t.bt("Annuler", "Cancel", "gestalt.daterange.cancel", undefined, true)},HelpButton:{tooltipMessage:t.bt("Cliquez pour en savoir plus", "Click to learn more", "gestalt.helpButton.tooltipMessage", undefined, true)},Link:{accessibilityNewTabLabel:t.bt("Ouvrir dans un nouvel onglet", "Opens a new tab", "gestalt.linkRoleComponent.accessibilityNewTabLabel", undefined, true),accessibilityDownloadLabel:t.bt("Télécharge un fichier", "Downloads a file", "gestalt.linkRoleComponent.accessibilityDownloadLabel", undefined, true)},Modal:{accessibilityDismissButtonLabel:t.bt("Ignorer le modal", "Dismiss modal", "gestalt.modal.accessibilityDismissButtonLabel", undefined, true)},Popover:{accessibilityDismissButtonLabel:t.bt("Fermer la fenêtre contextuelle", "Dismiss popover", "gestalt.popover.accessibilityDismissButtonLabel", undefined, true)},OverlayPanel:{accessibilityDismissButtonLabel:t.bt("Fermer le panneau de superposition", "Dismiss overlay panel", "gestalt.overlaypanel.accessibilityDismissButtonLabel", undefined, true),dismissConfirmationMessage:t.bt("Souhaitez-vous vraiment fermer cette page ?", "Are you sure you want to dismiss?", "gestalt.sheet.dismissConfirmationMessage", undefined, true),dismissConfirmationSubtext:t.bt("Toutes vos modifications seront perdues. Cette action est irréversible", "You will lose all of your changes. This cannot be undone", "gestalt.sheet.dismissConfirmationSubtext", undefined, true),dismissConfirmationPrimaryActionText:t.bt("Oui, ignorer", "Yes, dismiss", "gestalt.sheet.dismissConfirmationPrimaryActionText", undefined, true),dismissConfirmationPrimaryActionTextLabel:t.bt("Oui, fermer le panneau de superposition", "Yes, dismiss the overlay panel", "gestalt.overlaypanel.dismissConfirmationPrimaryActionTextLabel", undefined, true),dismissConfirmationSecondaryActionText:t.bt("Non, revenir en arrière", "No, go back", "gestalt.sheet.dismissConfirmationSecondaryActionText", undefined, true),dismissConfirmationSecondaryActionTextLabel:t.bt("Non, revenir à la feuille", "No, go back to the sheet", "gestalt.sheet.dismissConfirmationSecondaryActionTextLabel", undefined, true)},SheetMobile:{accessibilityDismissButtonLabel:t.bt("Fermer la feuille inférieure", "Dismiss bottom sheet", "gestalt.sheetmobile.dismissButtonAccessibilityLabel", undefined, true),accessibilityGrabberLabel:t.bt("Grabber", "Grabber", "gestalt.sheetmobile.grabberAccessibilityLabel", undefined, true),accessibilityLabel:t.bt("Page inférieure", "Bottom sheet", "gestalt.sheetmobile.accessibilityLabel", undefined, true)},SideNavigation:{accessibilityDismissButtonLabel:t.bt("Fermer la navigation latérale.", "Dismiss side navigation.", "gestalt.sidenavigation.accessibilityDismissButtonLabel", undefined, true),accessibilityCollapseButtonLabel:t.bt("Réduire le panneau de navigation latéral.", "Collapse side navigation panel.", "gestalt.sidenavigation.accessibilityCollapseButtonLabel", undefined, true),accessibilityExpandButtonLabel:t.bt("Développer le panneau de navigation latéral.", "Expand side navigation panel.", "gestalt.sidenavigation.accessibilityExpandButtonLabel", undefined, true),accessibilityEllipsisLabel:t.bt("Sous-tableau.", "Section.", "gestalt.sidenavigation.accessibilityEllipsisLabel", undefined, true)},Spinner:{accessibilityLabel:t.bt("Chargement", "Loading", "gestalt.spinner.accessibilityLabel", undefined, true)},TableOfContents:{accessibilityLabel:t.bt("Table des matières", "Table of contents", "gestalt.tableOfContents.accessibilityLabel", undefined, true)},Tabs:{accessibilityNotificationLabel:t.bt("Cet onglet affiche un indicateur de notification", "This tab is displaying a notification indicator", "gestalt.tab.accessibilityNotificationLabel", undefined, true)},Tag:{accessibilityErrorIconLabel:t.bt("Erreur", "Error", "gestalt.tag.accessibilityErrorIconLabel", undefined, true),accessibilityRemoveIconLabel:t.bt("Supprimer la balise", "Remove tag", "gestalt.tag.accessibilityRemoveIconLabel", undefined, true),accessibilityWarningIconLabel:t.bt("Attention", "Warning", "gestalt.tag.accessibilityWarningIconLabel", undefined, true)},TagData:{accessibilityRemoveIconLabel:t.bt("Supprimer la balise", "Remove tag", "gestalt.tagData.accessibilityRemoveIconLabel", undefined, true)},TextField:{accessibilityHidePasswordLabel:t.bt("Masquer le mot de passe", "Hide password", "gestalt.textField.accessibilityHidePasswordLabel", undefined, true),accessibilityShowPasswordLabel:t.bt("Afficher le mot de passe", "Show password", "gestalt.textField.accessibilityShowPasswordLabel", undefined, true)},Toast:{accessibilityDismissButtonLabel:t.bt("Ignorer le message", "Dismiss message", "gestalt.toast.accessibilityDismissButtonLabel", undefined, true),accessibilityIconSuccessLabel:t.bt("Message de réussite", "Success message", "gestalt.toast.accessibilityIconSuccessLabel", undefined, true),accessibilityIconErrorLabel:t.bt("Message d’erreur", "Error message", "gestalt.toast.accessibilityIconErrorLabel", undefined, true),accessibilityProcessingLabel:t.bt("Message en cours de traitement", "Processing message", "gestalt.toast.accessibilityProcessingLabel", undefined, true)},BannerUpsell:{accessibilityDismissButtonLabel:t.bt("Fermer la bannière", "Dismiss banner", "gestalt.upsell.accessibilityDismissButtonLabel", undefined, true)},Video:{accessibilityMaximizeLabel:t.bt("Agrandir", "Maximize", "gestalt.video.accessibilityMaximizeLabel", undefined, true),accessibilityMinimizeLabel:t.bt("Réduire", "Minimize", "gestalt.video.accessibilityMinimizeLabel", undefined, true),accessibilityMuteLabel:t.bt("Couper le son", "Mute", "gestalt.video.accessibilityMuteLabel", undefined, true),accessibilityPauseLabel:t.bt("Mettre en pause", "Pause", "gestalt.video.accessibilityPauseLabel", undefined, true),accessibilityPlayLabel:t.bt("Lire", "Play", "gestalt.video.accessibilityPlayLabel", undefined, true),accessibilityProgressLabel:t.bt("Progression de la vidéo", "Video progress", "gestalt.video.accessibilityProgressLabel", undefined, true),accessibilityUnmuteLabel:t.bt("Activer le son", "Unmute", "gestalt.video.accessibilityUnmuteLabel", undefined, true),accessibilityHideCaptionsLabel:t.bt("Masquer les légendes", "Hide captions", "gestalt.video.accessibilityHideCaptionsLabel", undefined, true),accessibilityShowCaptionsLabel:t.bt("Montrer les légendes", "Show captions", "gestalt.video.accessibilityShowCaptionsLabel", undefined, true)},SearchField:{accessibilityClearButtonLabel:t.bt("Effacer la saisie", "Clear input", "gestalt.searchfield.accessibilityClearButtonLabel", undefined, true)},Attribution:{textSponsored:t.bt("Sponsorisé", "Sponsored", "gestalt.attribution.textSponsored", undefined, true),accessibilityVerifiedMerchant:t.bt("Commerçant vérifié", "Verified merchant", "gestalt.attribution.accessibilityVerifiedMerchant", undefined, true),accessibilityVerifiedPinner:t.bt("Utilisateur vérifié", "Verified Pinner", "gestalt.attribution.accessibilityVerifiedPinner", undefined, true)}}),[t]);return(0,r.jsx)(l.J6,{labels:i,children:e})}},664450:function(e,t,i){i.d(t,{Z:()=>s});class s{constructor(e,t="myDatabase",i="myStore"){var s,a,l;s="cache",a=new Map,(s="symbol"==typeof(l=function(e,t){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var s=i.call(e,t||"default");if("object"!=typeof s)return s;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(s,"string"))?l:l+"")in this?Object.defineProperty(this,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):this[s]=a,this.dbName=t,this.storeName=i,this.dbPromise=(async()=>{try{return await this.initializeDB(e)}catch{return null}})()}async initializeDB(e){return new Promise((t,i)=>{try{let s=e.open(this.dbName,1);s.onerror=()=>{i(Error("IndexedDB initialization error: "+s.error))},s.onupgradeneeded=()=>{let e=s.result;e.objectStoreNames.contains(this.storeName)||e.createObjectStore(this.storeName,{keyPath:"key"})},s.onsuccess=()=>{t(s.result)}}catch(e){i(Error("IndexedDB initialization error: "+e))}})}async reopenDatabaseIfClosed(){let e=await this.dbPromise;return e&&!e.close?e:(this.dbPromise=this.initializeDB(window.indexedDB),this.dbPromise)}async getObjectStore(e="readwrite"){let t=await this.reopenDatabaseIfClosed();return t?t.transaction(this.storeName,e).objectStore(this.storeName):null}async getItem(e){if(this.cache.has(e))return this.cache.get(e)??null;let t=await this.getObjectStore();return t?new Promise((i,s)=>{let a=t.get(e);a.onerror=()=>s(a.error),a.onsuccess=()=>{let t=a.result?.value||null;null!==t&&this.cache.set(e,t),i(t)}}):null}async getAllItem(){let e=await this.getObjectStore();return e?new Promise((t,i)=>{let s=e.getAll();s.onerror=()=>i(s.error),s.onsuccess=()=>{s.result?.forEach(e=>{this.cache.set(e.key,e.value)}),t(s.result)}}):null}async setItem(e,t){this.cache.set(e,t);let i=await this.getObjectStore();return i?new Promise((s,a)=>{let l=i.put({key:e,value:t});l.onerror=()=>{a(l.error)},l.onsuccess=()=>{s(null)}}):null}async removeItem(e){this.cache.delete(e);let t=await this.getObjectStore();return t?new Promise((i,s)=>{let a=t.delete(e);a.onerror=()=>s(a.error),a.onsuccess=()=>i(null)}):null}async clear(){this.cache.clear();let e=await this.getObjectStore();return e?new Promise((t,i)=>{let s=e.clear();s.onerror=()=>i(s.error),s.onsuccess=()=>t(null)}):null}}},121793:function(e,t,i){let s;i.d(t,{w:()=>b});var a=i(898582),l=i(973160),o=i(664450),r=i(732888),n=i(510928),c=i(603316);function _(e,t,i){var s;return(t="symbol"==typeof(s=function(e,t){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var s=i.call(e,t||"default");if("object"!=typeof s)return s;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?s:s+"")in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}let d=null,u="ACTIVE",h="PAUSED",p=()=>window&&window.performance&&window.performance.now?`(Time: ${(window.performance.now()/1e3).toFixed(3)}s)`:"";function b({contextLogger:e}){if(s||(s=window?.indexedDB?new o.Z(window.indexedDB,"EventLoggingDB","TimeSpent"):null),d)return d;let t=new Map,i=(0,n.Z)()&&(0,n.Z)().debug_timespent,b=[],m=i?console:{error:(...e)=>{},log:(...e)=>{},group:(...e)=>{},groupEnd:(...e)=>{}};return console.group||(m.group=(...e)=>console.log(...e),m.groupEnd=(...e)=>{}),d=new class{constructor(){_(this,"appTimedPair",null),_(this,"clickthroughProperties",null),_(this,"historyStackContext",null),_(this,"offsiteTimedPair",null),_(this,"offsiteTimedPairForegroundId",null),_(this,"pins",Object.freeze({})),_(this,"addEventListeners",()=>{var e;let t,{hidden:i,visibilityChange:s}=(0,l.sR)(),a=e=>{document[i]?this.unregisterApp(void 0,e):this.registerApp()};s&&document.addEventListener(s,a,!1),window.addEventListener("focus",this.registerApp),window.addEventListener("blur",e=>this.unregisterApp(void 0,e));let o=(e=e=>this.unregisterApp(void 0,e),t=!1,(...i)=>{t||(t=!0,e(...i))});window.addEventListener("beforeunload",o),window.addEventListener("pagehide",o);let r=navigator&&navigator.userAgent.toLowerCase();r&&r.includes("macintosh")&&r.includes("chrome")&&window.addEventListener("popstate",()=>{document.hasFocus()||document[i]||(0,c.nP)("chrome_mac_back_forward_button",{sampleRate:1})})}),_(this,"storeClickthroughProperties",e=>{this.clickthroughProperties&&(0,c.nP)("webapp.metrics.clickthroughs.overwritten",{sampleRate:1,tags:{previousView:this.clickthroughProperties.view_type,previousViewParameter:this.clickthroughProperties.view_parameter,nextView:e.view_type,nextViewParameter:e.view_parameter}}),this.clickthroughProperties={time:(0,l.ZP)(),...e}}),_(this,"clearClickthroughProperties",()=>{this.clickthroughProperties=null,this.offsiteTimedPair=null,this.offsiteTimedPairForegroundId=null}),_(this,"registerApp",()=>{m.group("App Foreground",p()),null==this.appTimedPair?(this.appTimedPair=new r.Z,this.appTimedPair.start(),this._unpauseAllComponents(),this._endOffsiteTimedPair(),null!==this.appTimedPair&&void 0!==this.appTimedPair&&e.logContextEvent({event_type:4700,pair_id:this.appTimedPair.uuid})):m.error("TimedPair already exists for app."),m.groupEnd()}),_(this,"logIndexDbStatLog",({error:e,isError:t,isDroppedEvent:i})=>{let s,l=(0,a.Z)(),o=l?.userAgent||{},r=!(o.isMobile||o.isTablet),n={error_message:e?.message??"unknown",appType:r?"WEB_DENZEL":"WEB_MOBILE",country:l?.country??"unknown",browserName:o.browserName,osName:o.osName,browserType:o.browserType,browserVersion:o.browserVersion,isError:t,errorName:e?.errorName??"unknown",errorDetails:e?.details??"unknown",errorStackTrace:e?.stack_trace??"unknown"};s=i?"dropped":t?"errors":"success",(0,c.nP)(`webapp.metrics.timespent.indexdb.${s}`,{tags:n})}),_(this,"unregisterApp",(t=!1,i)=>{m.group("App Background",p());let{appTimedPair:s}=this;if(null!=s){this._pauseAllComponents();let t=s.end();this._startOffsiteTimedPair(),e.logContextEvent({event_type:4701,duration_ns:t,pair_id:s.uuid}),this.appTimedPair=null}else m.error("No TimedPair found for app.");let a=["beforeunload","pagehide"],l=a.includes(i?.type||""),o=a.includes(i?.pauseReason||"");(l||o)&&this._endOffsiteTimedPair(),t||e.flushContextEvents(),m.groupEnd()}),_(this,"_activateComponent",t=>{m.group("Activating component",p()),i&&m.log(t.getContext());let s=t.getTimedPair();if(s){s.start();let{view:i,viewParameter:a,component:l,element:o,objectId:r,clientTrackingParams:n}=t.getLoggerContext();e.logContextEvent({event_type:4702,view_type:i,view_parameter:a,component:l,element:o,object_id_str:r,view_data:t.props.viewData,pair_id:s.uuid,clientTrackingParams:n,aux_data:{time_spent_foreground_pairid:this.appTimedPair&&this.appTimedPair.uuid,time_spent_parent_pairid:t.getParentId(),...t.props.auxData}})}m.groupEnd()}),_(this,"_deactivateComponent",t=>{m.group("Deactivating component",p()),i&&m.log(t.getContext());let s=t.getTimedPair();if(s){let{view:i,viewParameter:a,component:l,element:o,objectId:r,clientTrackingParams:n}=s,c=s.end();e.logContextEvent({event_type:4703,view_type:i,view_parameter:a,component:l,element:o,object_id_str:r,view_data:t.props.viewData,duration_ns:c,pair_id:s.uuid,clientTrackingParams:n,aux_data:{time_spent_foreground_pairid:this.appTimedPair&&this.appTimedPair.uuid,time_spent_parent_pairid:t.getParentId(),...t.props.auxData}})}m.groupEnd()}),_(this,"_startOffsiteTimedPair",()=>{this.clickthroughProperties&&(this.offsiteTimedPair=new r.Z({view:186,viewParameter:this.clickthroughProperties.view_parameter,objectId:this.clickthroughProperties.object_id_str}),this.offsiteTimedPair.start(),this.offsiteTimedPairForegroundId=this.appTimedPair?this.appTimedPair.uuid:null,this.clickthroughProperties={...this.clickthroughProperties,aux_data:{...this.clickthroughProperties.aux_data,time_to_offsite:void 0!==this.clickthroughProperties.time&&null!==this.clickthroughProperties.time&&"number"==typeof this.clickthroughProperties.time?(0,l.ZP)()-this.clickthroughProperties.time:void 0}},e.logContextEvent({...this.clickthroughProperties,event_type:4702,view_type:186,pair_id:this.offsiteTimedPair?this.offsiteTimedPair.uuid:null,aux_data:{...this.clickthroughProperties.aux_data,time_spent_foreground_pairid:this.offsiteTimedPairForegroundId}}),this._addOffSitePairToIndexDB({offsiteTimedPairUUID:this.offsiteTimedPair?.uuid,clickthroughProperties:this.clickthroughProperties,timeCreated:this.offsiteTimedPair?.startTime,offsiteTimedPairForegroundId:this.offsiteTimedPairForegroundId}))}),_(this,"_endOffsiteTimedPair",()=>{let{offsiteTimedPair:t,clickthroughProperties:i}=this;if(t&&i){let s=t.end();e.logContextEvent({...i,event_type:4703,view_type:186,pair_id:this.offsiteTimedPair?this.offsiteTimedPair.uuid:null,aux_data:{...i.aux_data,time_spent_foreground_pairid:this.offsiteTimedPairForegroundId},duration_ns:s}),this._removeOffSitePairByIdFromIndexDB(this.offsiteTimedPair?.uuid),this._syncCachedTimedPairEndEvents(),this._onOffsiteEnd(),this.clearClickthroughProperties()}else this._syncCachedTimedPairEndEvents()}),_(this,"_addOffSitePairToIndexDB",async({offsiteTimedPairUUID:e,clickthroughProperties:t,timeCreated:i,offsiteTimedPairForegroundId:a})=>{try{await s?.setItem(e,{clickthroughProperties:{...t},timeCreated:i,offsiteTimedPairForegroundId:a})}catch(e){this.logIndexDbStatLog({isError:!0,error:{message:"Transaction could not be added",details:e instanceof Error?e.message:"Unknown error",stack_trace:e instanceof Error?e.stack??"No stack trace available":"No stack trace available",errorName:e instanceof Error?e.name:"N/A"}})}}),_(this,"_addAppTimerToIndexDB",async({foregroundAppTimerUUID:e,timeCreated:t})=>{try{await s?.setItem(e,{timeCreated:t})}catch(e){this.logIndexDbStatLog({isError:!0,error:{message:"Transaction could not be added",details:e instanceof Error?e.message:"Unknown error",stack_trace:e instanceof Error?e.stack??"No stack trace available":"No stack trace available",errorName:e instanceof Error?e.name:"N/A"}})}}),_(this,"_removeAppTimerFromIndexDB",async({foregroundAppTimerUUID:e})=>{try{if(!e)return;await s?.removeItem(e)}catch(e){this.logIndexDbStatLog({isError:!0,error:{message:"Transaction could not be removed",details:e instanceof Error?e.message:"Unknown error",stack_trace:e instanceof Error?e.stack??"No stack trace available":"No stack trace available",errorName:e instanceof Error?e.name:"N/A"}})}}),_(this,"_removeOffSitePairByIdFromIndexDB",async e=>{try{if(!e)return;await s?.removeItem(e)}catch(e){this.logIndexDbStatLog({isError:!0,error:{message:"Transaction could not be removed",details:e instanceof Error?e.message:"Unknown error",stack_trace:e instanceof Error?e.stack??"No stack trace available":"No stack trace available",errorName:e instanceof Error?e.name:"N/A"}})}}),_(this,"_syncCachedTimedPairEndEvents",async()=>{try{(await s?.getAllItem()||[]).forEach(async t=>{let{key:i,value:s}=t,{clickthroughProperties:a,timeCreated:l,offsiteTimedPairForegroundId:o}=s,n=(0,r.h)();l&&(0,r.h)()-l>864e11?this.logIndexDbStatLog({isDroppedEvent:!0,isError:!1}):(e.logContextEvent({...a,event_type:4703,view_type:186,pair_id:i||null,aux_data:{...a?.aux_data,time_spent_foreground_pairid:o,is_timed_pair_cached:!0},duration_ns:l?n-l:null}),this.logIndexDbStatLog({isError:!1}))}),await s?.clear()}catch(e){this.logIndexDbStatLog({isError:!0,error:{message:"Error while syncing cached events",details:e instanceof Error?e.message:"Unknown error",stack_trace:e instanceof Error?e.stack??"No stack trace available":"No stack trace available",errorName:e instanceof Error?e.name:"N/A"}})}}),_(this,"_onOffsiteEnd",()=>{m.group("Trigger onOffsiteEndCallbacks"),b.forEach(e=>e({appTimedPair:this.appTimedPair,clickthroughProperties:this.clickthroughProperties,offsiteTimedPair:this.offsiteTimedPair,offsiteTimedPairForegroundId:this.offsiteTimedPairForegroundId})),m.groupEnd()}),_(this,"_pauseAllComponents",()=>{m.group("Pause all components"),t.forEach((e,t,i)=>{e===u&&this._deactivateComponent(t),i.set(t,h)}),m.groupEnd()}),_(this,"_unpauseAllComponents",()=>{m.group("Unpause all components"),t.forEach((e,i)=>{let s=new r.Z(i.getLoggerContext());i.setTimedPair(s,()=>{t.set(i,u),this._activateComponent(i)})}),m.groupEnd()})}setHistoryStackContext(e){this.historyStackContext=e}setPins(e){this.pins=e}startOffsiteRightClickTimedPair(t=!1){this._startOffsiteTimedPair(),t||e.flushContextEvents()}registerComponent(e){null===this.appTimedPair?t.set(e,h):(t.set(e,u),this._activateComponent(e))}unregisterComponent(e){t.get(e)===u&&(this._deactivateComponent(e),e.setTimedPair(new r.Z(e.getLoggerContext()))),t.delete(e)}size(){return t.size}onOffsiteEnd(e){b.push(e)}removeOnOffsiteEnd(e){let t=b.indexOf(e);t>-1&&b.splice(t,1)}_getIndexDBInstance(){return s}_getContextLogger(){return e}_clearTimeSpentManager(){this.appTimedPair=null,this.offsiteTimedPairForegroundId=null,d=null}_clearIndexDB(){s?.clear(),s=null}}}}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/92139.fr-07ee812b8e3912f1.mjs.map